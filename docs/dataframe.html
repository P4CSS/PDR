<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 4 Dataframe | Playing Data with R</title>
  <meta name="description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
  <meta name="generator" content="bookdown 0.17 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 4 Dataframe | Playing Data with R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
  <meta name="github-repo" content="P4CSS/PDR" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 4 Dataframe | Playing Data with R" />
  
  <meta name="twitter:description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
  

<meta name="author" content="JILUNG HSIEH" />


<meta name="date" content="2020-02-17" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="vector.html"/>
<link rel="next" href="date-and-time.html"/>
<script src="libs/header-attrs-2.1/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>About</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#自述"><i class="fa fa-check"></i>自述</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#學程式這回事"><i class="fa fa-check"></i>學程式這回事</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#何謂演算法"><i class="fa fa-check"></i>何謂演算法？</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#掌握課外學習資源"><i class="fa fa-check"></i>掌握課外學習資源</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="1" data-path="data-journalism.html"><a href="data-journalism.html"><i class="fa fa-check"></i><b>1</b> Data Journalism</a>
<ul>
<li class="chapter" data-level="1.1" data-path="data-journalism.html"><a href="data-journalism.html#what-is-什麼是資料新聞"><i class="fa fa-check"></i><b>1.1</b> What-is 什麼是資料新聞？</a></li>
<li class="chapter" data-level="1.2" data-path="data-journalism.html"><a href="data-journalism.html#何謂資料"><i class="fa fa-check"></i><b>1.2</b> 何謂資料？</a></li>
<li class="chapter" data-level="1.3" data-path="data-journalism.html"><a href="data-journalism.html#資料的詮釋"><i class="fa fa-check"></i><b>1.3</b> 資料的詮釋</a></li>
<li class="chapter" data-level="1.4" data-path="data-journalism.html"><a href="data-journalism.html#where-is-data-資料在哪裡"><i class="fa fa-check"></i><b>1.4</b> Where-is data? 資料在哪裡？</a></li>
<li class="chapter" data-level="1.5" data-path="data-journalism.html"><a href="data-journalism.html#what-does-data-look-like"><i class="fa fa-check"></i><b>1.5</b> What does data look like?</a></li>
</ul></li>
<li class="part"><span><b>I Part I R語言基礎</b></span></li>
<li class="chapter" data-level="2" data-path="r-.html"><a href="r-.html"><i class="fa fa-check"></i><b>2</b> R語言基礎速遊</a>
<ul>
<li class="chapter" data-level="2.1" data-path="r-.html"><a href="r-.html#rstudio-基本操作"><i class="fa fa-check"></i><b>2.1</b> RStudio 基本操作</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="r-.html"><a href="r-.html#執行r-markdown"><i class="fa fa-check"></i><b>2.1.1</b> 執行R Markdown</a></li>
<li class="chapter" data-level="2.1.2" data-path="r-.html"><a href="r-.html#安裝第三方套件"><i class="fa fa-check"></i><b>2.1.2</b> 安裝第三方套件</a></li>
<li class="chapter" data-level="2.1.3" data-path="r-.html"><a href="r-.html#載入第三方套件"><i class="fa fa-check"></i><b>2.1.3</b> 載入第三方套件</a></li>
<li class="chapter" data-level="2.1.4" data-path="r-.html"><a href="r-.html#註解"><i class="fa fa-check"></i><b>2.1.4</b> 註解</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="r-.html"><a href="r-.html#用r載入資料"><i class="fa fa-check"></i><b>2.2</b> 用R載入資料</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="r-.html"><a href="r-.html#範例一載入dcard資料"><i class="fa fa-check"></i><b>2.2.1</b> 範例一：載入Dcard資料</a></li>
<li class="chapter" data-level="2.2.2" data-path="r-.html"><a href="r-.html#範例二讀取台北市竊盜案件發生地區與時間"><i class="fa fa-check"></i><b>2.2.2</b> 範例二：讀取台北市竊盜案件發生地區與時間</a></li>
<li class="chapter" data-level="2.2.3" data-path="r-.html"><a href="r-.html#範例三用api載入內政部資料"><i class="fa fa-check"></i><b>2.2.3</b> 範例三：用API載入內政部資料</a></li>
<li class="chapter" data-level="2.2.4" data-path="r-.html"><a href="r-.html#範例四獲取104資料"><i class="fa fa-check"></i><b>2.2.4</b> 範例四：獲取104資料</a></li>
<li class="chapter" data-level="2.2.5" data-path="r-.html"><a href="r-.html#範例五獲取ubike資料"><i class="fa fa-check"></i><b>2.2.5</b> 範例五：獲取ubike資料</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="r-.html"><a href="r-.html#儲存現有變數"><i class="fa fa-check"></i><b>2.3</b> 儲存現有變數</a></li>
<li class="chapter" data-level="2.4" data-path="r-.html"><a href="r-.html#查詢函式的定義"><i class="fa fa-check"></i><b>2.4</b> 查詢函式的定義</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="vector.html"><a href="vector.html"><i class="fa fa-check"></i><b>3</b> Vector</a>
<ul>
<li class="chapter" data-level="" data-path="vector.html"><a href="vector.html#notes"><i class="fa fa-check"></i>Notes</a></li>
<li class="chapter" data-level="3.1" data-path="vector.html"><a href="vector.html#vector的基本操作"><i class="fa fa-check"></i><b>3.1</b> Vector的基本操作</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="vector.html"><a href="vector.html#建立vector"><i class="fa fa-check"></i><b>3.1.1</b> 建立Vector</a></li>
<li class="chapter" data-level="3.1.2" data-path="vector.html"><a href="vector.html#查看vector的內容"><i class="fa fa-check"></i><b>3.1.2</b> 查看vector的內容</a></li>
<li class="chapter" data-level="3.1.3" data-path="vector.html"><a href="vector.html#取出vector部分內容-slicing"><i class="fa fa-check"></i><b>3.1.3</b> 取出vector部分內容: Slicing</a></li>
<li class="chapter" data-level="3.1.4" data-path="vector.html"><a href="vector.html#刪除vector中的元素deleting"><i class="fa fa-check"></i><b>3.1.4</b> 刪除vector中的元素：Deleting</a></li>
<li class="chapter" data-level="3.1.5" data-path="vector.html"><a href="vector.html#添加合併vectorsconcatinating-binding-merging-appending"><i class="fa fa-check"></i><b>3.1.5</b> 添加合併vectors：concatinating, binding, merging, appending</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="vector.html"><a href="vector.html#vector的運算"><i class="fa fa-check"></i><b>3.2</b> Vector的運算</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="vector.html"><a href="vector.html#數值運算arithmetic-operations"><i class="fa fa-check"></i><b>3.2.1</b> 數值運算：Arithmetic operations</a></li>
<li class="chapter" data-level="3.2.2" data-path="vector.html"><a href="vector.html#邏輯運算logic-comparisons"><i class="fa fa-check"></i><b>3.2.2</b> 邏輯運算：Logic comparisons</a></li>
<li class="chapter" data-level="3.2.3" data-path="vector.html"><a href="vector.html#用邏輯運算來篩選資料subsetting-by-logic-comparisons"><i class="fa fa-check"></i><b>3.2.3</b> 用邏輯運算來篩選資料：Subsetting by logic comparisons</a></li>
<li class="chapter" data-level="3.2.4" data-path="vector.html"><a href="vector.html#排序sorting-and-ordering"><i class="fa fa-check"></i><b>3.2.4</b> 排序：Sorting and ordering</a></li>
<li class="chapter" data-level="3.2.5" data-path="vector.html"><a href="vector.html#內建的數學函式"><i class="fa fa-check"></i><b>3.2.5</b> 內建的數學函式</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="vector.html"><a href="vector.html#資料型態data-types"><i class="fa fa-check"></i><b>3.3</b> 資料型態：Data types</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="vector.html"><a href="vector.html#檢查資料型態checking-data-type"><i class="fa fa-check"></i><b>3.3.1</b> 檢查資料型態：Checking data type</a></li>
<li class="chapter" data-level="3.3.2" data-path="vector.html"><a href="vector.html#轉換資料型態converting-data-type"><i class="fa fa-check"></i><b>3.3.2</b> 轉換資料型態：Converting data type</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="dataframe.html"><a href="dataframe.html"><i class="fa fa-check"></i><b>4</b> Dataframe</a>
<ul>
<li class="chapter" data-level="" data-path="dataframe.html"><a href="dataframe.html#notes-1"><i class="fa fa-check"></i>Notes</a></li>
<li class="chapter" data-level="4.1" data-path="dataframe.html"><a href="dataframe.html#建立data.frame"><i class="fa fa-check"></i><b>4.1</b> 建立data.frame</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="dataframe.html"><a href="dataframe.html#範例一手動輸入台北市行政區人口與面積"><i class="fa fa-check"></i><b>4.1.1</b> 範例一：手動輸入台北市行政區人口與面積</a></li>
<li class="chapter" data-level="4.1.2" data-path="dataframe.html"><a href="dataframe.html#範例二手動輸入台灣的進出口對象與數量"><i class="fa fa-check"></i><b>4.1.2</b> 範例二：手動輸入台灣的進出口對象與數量</a></li>
<li class="chapter" data-level="4.1.3" data-path="dataframe.html"><a href="dataframe.html#more"><i class="fa fa-check"></i><b>4.1.3</b> More</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="dataframe.html"><a href="dataframe.html#觀察data.frame"><i class="fa fa-check"></i><b>4.2</b> 觀察data.frame</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="dataframe.html"><a href="dataframe.html#觀察資料維度"><i class="fa fa-check"></i><b>4.2.1</b> 觀察資料維度</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="dataframe.html"><a href="dataframe.html#操作data-frame"><i class="fa fa-check"></i><b>4.3</b> 操作data frame</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="dataframe.html"><a href="dataframe.html#取出data-frame中的一個變數"><i class="fa fa-check"></i><b>4.3.1</b> 取出data frame中的一個變數</a></li>
<li class="chapter" data-level="4.3.2" data-path="dataframe.html"><a href="dataframe.html#mutate-透過運算產生新變數"><i class="fa fa-check"></i><b>4.3.2</b> mutate 透過運算產生新變數</a></li>
<li class="chapter" data-level="4.3.3" data-path="dataframe.html"><a href="dataframe.html#filter-select-篩選資料選取變數"><i class="fa fa-check"></i><b>4.3.3</b> filter, select 篩選資料、選取變數</a></li>
<li class="chapter" data-level="4.3.4" data-path="dataframe.html"><a href="dataframe.html#sorting-排序按照某個變數排序"><i class="fa fa-check"></i><b>4.3.4</b> sorting 排序：按照某個變數排序</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="dataframe.html"><a href="dataframe.html#more-1"><i class="fa fa-check"></i><b>4.4</b> MORE</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="dataframe.html"><a href="dataframe.html#plotting"><i class="fa fa-check"></i><b>4.4.1</b> Plotting</a></li>
<li class="chapter" data-level="4.4.2" data-path="dataframe.html"><a href="dataframe.html#using-dplyr"><i class="fa fa-check"></i><b>4.4.2</b> Using dplyr</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="dataframe.html"><a href="dataframe.html#character-operations"><i class="fa fa-check"></i><b>4.5</b> Character operations</a>
<ul>
<li class="chapter" data-level="4.5.1" data-path="dataframe.html"><a href="dataframe.html#character-operations-1"><i class="fa fa-check"></i><b>4.5.1</b> Character operations</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="date-and-time.html"><a href="date-and-time.html"><i class="fa fa-check"></i><b>5</b> Date and Time</a>
<ul>
<li class="chapter" data-level="5.1" data-path="date-and-time.html"><a href="date-and-time.html#時間物件數值表示文字表示間的關係"><i class="fa fa-check"></i><b>5.1</b> 時間物件、數值表示、文字表示間的關係</a></li>
</ul></li>
<li class="part"><span><b>II Part II 獲取資料</b></span></li>
<li class="chapter" data-level="6" data-path="-excel-.html"><a href="-excel-.html"><i class="fa fa-check"></i><b>6</b> 讀取Excel：以世界各國產假支薪政策為例</a>
<ul>
<li class="chapter" data-level="6.1" data-path="-excel-.html"><a href="-excel-.html#程式寫作使用base套件"><i class="fa fa-check"></i><b>6.1</b> 程式寫作：使用base套件</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="-excel-.html"><a href="-excel-.html#步驟一用readxl套件讀取excel檔"><i class="fa fa-check"></i><b>6.1.1</b> 步驟一：用readxl套件讀取Excel檔</a></li>
<li class="chapter" data-level="6.1.2" data-path="-excel-.html"><a href="-excel-.html#步驟二選取所需變項"><i class="fa fa-check"></i><b>6.1.2</b> 步驟二：選取所需變項</a></li>
<li class="chapter" data-level="6.1.3" data-path="-excel-.html"><a href="-excel-.html#步驟三將na值取代為0"><i class="fa fa-check"></i><b>6.1.3</b> 步驟三：將NA值取代為0。</a></li>
<li class="chapter" data-level="6.1.4" data-path="-excel-.html"><a href="-excel-.html#步驟四篩出所需要的資料列"><i class="fa fa-check"></i><b>6.1.4</b> 步驟四：篩出所需要的資料列</a></li>
<li class="chapter" data-level="6.1.5" data-path="-excel-.html"><a href="-excel-.html#步驟五繪圖"><i class="fa fa-check"></i><b>6.1.5</b> 步驟五：繪圖</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="-csv-.html"><a href="-csv-.html"><i class="fa fa-check"></i><b>7</b> 讀取CSV：以台北市竊盜案分佈為例</a>
<ul>
<li class="chapter" data-level="7.1" data-path="-csv-.html"><a href="-csv-.html#分析步驟"><i class="fa fa-check"></i><b>7.1</b> 分析步驟</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="-csv-.html"><a href="-csv-.html#步驟一摘要與提要"><i class="fa fa-check"></i><b>7.1.1</b> 步驟一：摘要與提要</a></li>
<li class="chapter" data-level="7.1.2" data-path="-csv-.html"><a href="-csv-.html#步驟二載入台北市竊盜案資料"><i class="fa fa-check"></i><b>7.1.2</b> 步驟二：載入台北市竊盜案資料</a></li>
<li class="chapter" data-level="7.1.3" data-path="-csv-.html"><a href="-csv-.html#步驟三產生新的變項"><i class="fa fa-check"></i><b>7.1.3</b> 步驟三：產生新的變項</a></li>
<li class="chapter" data-level="7.1.4" data-path="-csv-.html"><a href="-csv-.html#步驟四整理清理資料"><i class="fa fa-check"></i><b>7.1.4</b> 步驟四：整理、清理資料</a></li>
<li class="chapter" data-level="7.1.5" data-path="-csv-.html"><a href="-csv-.html#步驟五視覺化"><i class="fa fa-check"></i><b>7.1.5</b> 步驟五：視覺化</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="-csv-.html"><a href="-csv-.html#綜合資料彙整data-summerazation"><i class="fa fa-check"></i><b>7.2</b> 綜合：資料彙整（Data Summerazation）</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="-csv-.html"><a href="-csv-.html#方法一tapply"><i class="fa fa-check"></i><b>7.2.1</b> 方法一：<code>tapply()</code></a></li>
<li class="chapter" data-level="7.2.2" data-path="-csv-.html"><a href="-csv-.html#方法二table"><i class="fa fa-check"></i><b>7.2.2</b> 方法二：<code>table()</code></a></li>
<li class="chapter" data-level="7.2.3" data-path="-csv-.html"><a href="-csv-.html#方法三count"><i class="fa fa-check"></i><b>7.2.3</b> 方法三：<code>count()</code></a></li>
<li class="chapter" data-level="7.2.4" data-path="-csv-.html"><a href="-csv-.html#練習"><i class="fa fa-check"></i><b>7.2.4</b> 練習</a></li>
</ul></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Playing Data with R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="dataframe" class="section level1" number="4">
<h1><span class="header-section-number">Chapter 4</span> Dataframe</h1>
<div id="notes-1" class="section level2 unnumbered" number="">
<h2>Notes</h2>
<p>一開始用Excel去想像抽象的語言。一欄（一直行、Column、一個變數）就是一個vector，所以可想像一個vector裡面應該資料型態要是一致的。常用基本資料型態包含numeric（數值型態）、character（文字型態）。單一一個Excel試算表就像一個list或data.frame。把好幾欄湊在一起，不同欄包含的資料形態就可能不同（有些欄是人名，有些欄是數字），湊在一起變成一個list，而data.frame就是一種特殊list的型態。</p>
</div>
<div id="建立data.frame" class="section level2" number="4.1">
<h2><span class="header-section-number">4.1</span> 建立data.frame</h2>
<div id="範例一手動輸入台北市行政區人口與面積" class="section level3" number="4.1.1">
<h3><span class="header-section-number">4.1.1</span> 範例一：手動輸入台北市行政區人口與面積</h3>
<p><strong>將資料Assign給變數</strong>。複製網頁上的資料，並把每個變項（例如區名、人口數、行政區面積）建立成vector，再分別Assign給變數。每個變項的vector必須等長（不是嗎？有幾個行政區，就要有幾個區的人口數，就要有幾個區的面積）。</p>
<div class="sourceCode" id="cb145"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb145-1"><a href="dataframe.html#cb145-1"></a>population &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">158228</span>, <span class="dv">126687</span>, <span class="dv">228075</span>, <span class="dv">204903</span>, <span class="dv">308383</span>, <span class="dv">187920</span>)</span>
<span id="cb145-2"><a href="dataframe.html#cb145-2"></a>town &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;中正&quot;</span>, <span class="st">&quot;大同&quot;</span>, <span class="st">&quot;中山&quot;</span>, <span class="st">&quot;松山&quot;</span>, <span class="st">&quot;大安&quot;</span>, <span class="st">&quot;萬華&quot;</span>)</span>
<span id="cb145-3"><a href="dataframe.html#cb145-3"></a>area &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="fl">7.6071</span>, <span class="fl">5.6815</span>, <span class="fl">13.6821</span>, <span class="fl">9.2878</span>, <span class="fl">11.3614</span>, <span class="fl">8.8522</span>)</span></code></pre></div>
<p><strong>將vectors整合成data.frame</strong>。使用<code>data.frame()</code>可以將數個等長的vetors整合成一個data.frame。就像一個EXCEL資料表。</p>
<div class="sourceCode" id="cb146"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb146-1"><a href="dataframe.html#cb146-1"></a>df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(town, population, area)</span>
<span id="cb146-2"><a href="dataframe.html#cb146-2"></a>df</span></code></pre></div>
<pre><code>##   town population    area
## 1 中正     158228  7.6071
## 2 大同     126687  5.6815
## 3 中山     228075 13.6821
## 4 松山     204903  9.2878
## 5 大安     308383 11.3614
## 6 萬華     187920  8.8522</code></pre>
<div class="sourceCode" id="cb148"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb148-1"><a href="dataframe.html#cb148-1"></a><span class="co"># View(df)</span></span></code></pre></div>
</div>
<div id="範例二手動輸入台灣的進出口對象與數量" class="section level3" number="4.1.2">
<h3><span class="header-section-number">4.1.2</span> 範例二：手動輸入台灣的進出口對象與數量</h3>
<p>這個案例是到<a href="https://cus93.trade.gov.tw/FSC3040F/FSC3040F">台灣出口進口貿易資料查詢</a>的網頁上，逐筆複製資料貼上。先建立三個vecvtors，再將vectors合併為data.frame。</p>
<div class="sourceCode" id="cb149"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb149-1"><a href="dataframe.html#cb149-1"></a>country &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;CN&quot;</span>, <span class="st">&quot;US&quot;</span>, <span class="st">&quot;JP&quot;</span>, <span class="st">&quot;HK&quot;</span>, <span class="st">&quot;KR&quot;</span>, <span class="st">&quot;SG&quot;</span>, <span class="st">&quot;DE&quot;</span>, <span class="st">&quot;MY&quot;</span>, <span class="st">&quot;VN&quot;</span>, <span class="st">&quot;PH&quot;</span>, <span class="st">&quot;TH&quot;</span>, <span class="st">&quot;AU&quot;</span>, <span class="st">&quot;NL&quot;</span>, <span class="st">&quot;SA&quot;</span>, <span class="st">&quot;ID&quot;</span>, <span class="st">&quot;GB&quot;</span>, <span class="st">&quot;IN&quot;</span>, <span class="st">&quot;FR&quot;</span>, <span class="st">&quot;IT&quot;</span>, <span class="st">&quot;AE&quot;</span>)</span>
<span id="cb149-2"><a href="dataframe.html#cb149-2"></a>import &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="fl">26.142</span>, <span class="fl">12.008</span>, <span class="fl">7.032</span>, <span class="fl">13.646</span>, <span class="fl">4.589</span>, <span class="fl">5.768</span>, <span class="fl">2.131</span>, <span class="fl">2.802</span>, <span class="fl">3.428</span>, <span class="fl">3.019</span>, <span class="fl">1.976</span>, <span class="fl">1.118</span>, <span class="fl">1.624</span>, <span class="fl">0.449</span>, <span class="fl">0.983</span>, <span class="fl">1.302</span>, <span class="fl">1.027</span>, <span class="fl">0.553</span>, <span class="fl">0.670</span>, <span class="fl">0.455</span>)</span>
<span id="cb149-3"><a href="dataframe.html#cb149-3"></a>export &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="fl">22.987</span>, <span class="fl">12.204</span>, <span class="fl">11.837</span>, <span class="fl">7.739</span>, <span class="fl">5.381</span>, <span class="fl">4.610</span>, <span class="fl">2.866</span>, <span class="fl">2.784</span>, <span class="fl">2.414</span>, <span class="fl">2.092</span>, <span class="fl">1.839</span>, <span class="fl">1.788</span>, <span class="fl">1.665</span>, <span class="fl">1.409</span>, <span class="fl">1.391</span>, <span class="fl">1.075</span>, <span class="fl">0.974</span>, <span class="fl">0.899</span>, <span class="fl">0.800</span>, <span class="fl">0.728</span>)</span>
<span id="cb149-4"><a href="dataframe.html#cb149-4"></a></span>
<span id="cb149-5"><a href="dataframe.html#cb149-5"></a>df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(country, import, export)</span>
<span id="cb149-6"><a href="dataframe.html#cb149-6"></a><span class="kw">str</span>(df)</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    20 obs. of  3 variables:
##  $ country: Factor w/ 20 levels &quot;AE&quot;,&quot;AU&quot;,&quot;CN&quot;,..: 3 19 11 7 12 17 4 13 20 15 ...
##  $ import : num  26.14 12.01 7.03 13.65 4.59 ...
##  $ export : num  22.99 12.2 11.84 7.74 5.38 ...</code></pre>
<ul>
<li><strong>stringAsFacgtors參數設定</strong>: 這時若以<code>str(df)</code>觀察該<code>df</code>的結構會發現，文字型態的資料被轉為<code>Factors</code>，這是我們所不樂見的。過去統計通常會把文字型態當成類別變數，於是用<code>Factors</code>作為資料型態，但資料科學中經常要處理大量的文字資料。此時可以加入一個參數<code>stringsAsFactors</code>設為<code>FALSE</code>，意味著預設不要將文字的資料轉為Factor而是直接以文字變項來處理。</li>
<li><strong>設定全域參數</strong>: 為了避免每次都要打這串參數，可以把它設定為全域參數，可以在程式一開始時便加上<code>options(stringsAsFactors = FASLE)</code>，意味著底下所有的函式如果有<code>stringsAsFactors</code>這個參數，一律自動設為<code>FALSE</code>。</li>
</ul>
<div class="sourceCode" id="cb151"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb151-1"><a href="dataframe.html#cb151-1"></a>df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(country, import, export, <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>)</span>
<span id="cb151-2"><a href="dataframe.html#cb151-2"></a><span class="kw">str</span>(df)</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    20 obs. of  3 variables:
##  $ country: chr  &quot;CN&quot; &quot;US&quot; &quot;JP&quot; &quot;HK&quot; ...
##  $ import : num  26.14 12.01 7.03 13.65 4.59 ...
##  $ export : num  22.99 12.2 11.84 7.74 5.38 ...</code></pre>
</div>
<div id="more" class="section level3" number="4.1.3">
<h3><span class="header-section-number">4.1.3</span> More</h3>
<p>甚至也可以用<code>data.frame()</code>建立一個新的、空的<code>data.frame</code>。在別的程式語言中，這可能被稱為建構子或initializing。
<strong>命名規則</strong>：<code>df.test</code>就R的用法就是一個變數，並不是<code>df</code>和<code>test</code>各自是一個變數。</p>
<div class="sourceCode" id="cb153"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb153-1"><a href="dataframe.html#cb153-1"></a>df.test &lt;-<span class="st"> </span><span class="kw">data.frame</span>()</span></code></pre></div>
</div>
</div>
<div id="觀察data.frame" class="section level2" number="4.2">
<h2><span class="header-section-number">4.2</span> 觀察data.frame</h2>
<ul>
<li><code>View(df)</code> 用RStudio所提供的GUI直接觀看變數</li>
<li><code>head(df)</code> 取前面六筆資料（也就是六列的資料來概觀該資料）</li>
<li><code>class(df)</code> 這個變數的物件型態</li>
<li><code>str(df)</code> 這個data.frame的結構，包含有哪些變數、各別是什麼變數型態，並呈現前幾個範例值。</li>
<li><code>summary(df)</code> 輸出每個變數的最大值、最小值、平均數、中位數等基本統計數值。</li>
<li><code>dplyr::glimpse(df)</code> 為<code>dplyr</code>套件中的函式。和<code>str(df)</code>的功能幾乎相同，但排版排的好太多了。</li>
</ul>
<div class="sourceCode" id="cb154"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb154-1"><a href="dataframe.html#cb154-1"></a><span class="co"># View(df)</span></span>
<span id="cb154-2"><a href="dataframe.html#cb154-2"></a><span class="kw">head</span>(df)    <span class="co"># get first part of the data.frame</span></span></code></pre></div>
<pre><code>##   country import export
## 1      CN 26.142 22.987
## 2      US 12.008 12.204
## 3      JP  7.032 11.837
## 4      HK 13.646  7.739
## 5      KR  4.589  5.381
## 6      SG  5.768  4.610</code></pre>
<div class="sourceCode" id="cb156"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb156-1"><a href="dataframe.html#cb156-1"></a><span class="kw">class</span>(df)</span></code></pre></div>
<pre><code>## [1] &quot;data.frame&quot;</code></pre>
<div class="sourceCode" id="cb158"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb158-1"><a href="dataframe.html#cb158-1"></a><span class="kw">str</span>(df)</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    20 obs. of  3 variables:
##  $ country: chr  &quot;CN&quot; &quot;US&quot; &quot;JP&quot; &quot;HK&quot; ...
##  $ import : num  26.14 12.01 7.03 13.65 4.59 ...
##  $ export : num  22.99 12.2 11.84 7.74 5.38 ...</code></pre>
<div class="sourceCode" id="cb160"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb160-1"><a href="dataframe.html#cb160-1"></a><span class="kw">summary</span>(df)</span></code></pre></div>
<pre><code>##    country              import           export      
##  Length:20          Min.   : 0.449   Min.   : 0.728  
##  Class :character   1st Qu.: 1.016   1st Qu.: 1.312  
##  Mode  :character   Median : 2.054   Median : 1.966  
##                     Mean   : 4.536   Mean   : 4.374  
##                     3rd Qu.: 4.884   3rd Qu.: 4.803  
##                     Max.   :26.142   Max.   :22.987</code></pre>
<div class="sourceCode" id="cb162"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb162-1"><a href="dataframe.html#cb162-1"></a>dplyr<span class="op">::</span><span class="kw">glimpse</span>(df)</span></code></pre></div>
<pre><code>## Observations: 20
## Variables: 3
## $ country &lt;chr&gt; &quot;CN&quot;, &quot;US&quot;, &quot;JP&quot;, &quot;HK&quot;, &quot;KR&quot;, &quot;SG&quot;, &quot;DE&quot;, &quot;MY&quot;, &quot;VN&quot;, &quot;PH&quot;, &quot;…
## $ import  &lt;dbl&gt; 26.142, 12.008, 7.032, 13.646, 4.589, 5.768, 2.131, 2.802, 3.…
## $ export  &lt;dbl&gt; 22.987, 12.204, 11.837, 7.739, 5.381, 4.610, 2.866, 2.784, 2.…</code></pre>
<div id="觀察資料維度" class="section level3" number="4.2.1">
<h3><span class="header-section-number">4.2.1</span> 觀察資料維度</h3>
<div class="sourceCode" id="cb164"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb164-1"><a href="dataframe.html#cb164-1"></a><span class="kw">dim</span>(df)</span></code></pre></div>
<pre><code>## [1] 20  3</code></pre>
<div class="sourceCode" id="cb166"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb166-1"><a href="dataframe.html#cb166-1"></a><span class="kw">ncol</span>(df)</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<div class="sourceCode" id="cb168"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb168-1"><a href="dataframe.html#cb168-1"></a><span class="kw">nrow</span>(df)</span></code></pre></div>
<pre><code>## [1] 20</code></pre>
<div class="sourceCode" id="cb170"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb170-1"><a href="dataframe.html#cb170-1"></a><span class="kw">length</span>(df)</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
</div>
</div>
<div id="操作data-frame" class="section level2" number="4.3">
<h2><span class="header-section-number">4.3</span> 操作data frame</h2>
<div id="取出data-frame中的一個變數" class="section level3" number="4.3.1">
<h3><span class="header-section-number">4.3.1</span> 取出data frame中的一個變數</h3>
<p>每個data frame的一欄、一個變數相當於是一個vector，可以嘗試把其中一個變數取出來做資料型態觀察。
* <code>names(df)</code> 列出變數名稱
* <code>df$發生.現.地點</code> 顯示該變數內容
* <code>df$發生時段</code> 顯示該變數內容
* <code>length(df$發生時段)</code> 顯示該變數的長度（相當於有幾個）</p>
<div class="sourceCode" id="cb172"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb172-1"><a href="dataframe.html#cb172-1"></a><span class="kw">names</span>(df)</span></code></pre></div>
<pre><code>## [1] &quot;country&quot; &quot;import&quot;  &quot;export&quot;</code></pre>
<div class="sourceCode" id="cb174"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb174-1"><a href="dataframe.html#cb174-1"></a><span class="kw">head</span>(df<span class="op">$</span>發生.現.地點)</span></code></pre></div>
<pre><code>## NULL</code></pre>
<div class="sourceCode" id="cb176"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb176-1"><a href="dataframe.html#cb176-1"></a><span class="kw">head</span>(df<span class="op">$</span>發生時段)</span></code></pre></div>
<pre><code>## NULL</code></pre>
<div class="sourceCode" id="cb178"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb178-1"><a href="dataframe.html#cb178-1"></a><span class="kw">length</span>(df<span class="op">$</span>發生時段)</span></code></pre></div>
<pre><code>## [1] 0</code></pre>
<div class="sourceCode" id="cb180"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb180-1"><a href="dataframe.html#cb180-1"></a><span class="kw">summary</span>(df)</span></code></pre></div>
<pre><code>##    country              import           export      
##  Length:20          Min.   : 0.449   Min.   : 0.728  
##  Class :character   1st Qu.: 1.016   1st Qu.: 1.312  
##  Mode  :character   Median : 2.054   Median : 1.966  
##                     Mean   : 4.536   Mean   : 4.374  
##                     3rd Qu.: 4.884   3rd Qu.: 4.803  
##                     Max.   :26.142   Max.   :22.987</code></pre>
</div>
<div id="mutate-透過運算產生新變數" class="section level3" number="4.3.2">
<h3><span class="header-section-number">4.3.2</span> mutate 透過運算產生新變數</h3>
<ul>
<li>這裡容易犯錯的是，要記得跟程式講說你要加總或四則運算的是哪個df的variable。</li>
<li>從下面的這個操作中，該data.frame會產生一個新的變數<code>sub</code>，這就相當於Excel中的某一行減去某一行，然後把資料放在新的一行。</li>
</ul>
<div class="sourceCode" id="cb182"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb182-1"><a href="dataframe.html#cb182-1"></a>df<span class="op">$</span>sub &lt;-<span class="st"> </span>df<span class="op">$</span>import <span class="op">-</span><span class="st"> </span>df<span class="op">$</span>export</span></code></pre></div>
</div>
<div id="filter-select-篩選資料選取變數" class="section level3" number="4.3.3">
<h3><span class="header-section-number">4.3.3</span> filter, select 篩選資料、選取變數</h3>
<ul>
<li>注意，要告訴程式<code>import</code>和<code>export</code>是哪個<code>data.frame</code>的。</li>
<li><code>df[,]</code>為存取<code>df</code>中某個區段的數值或某個數值的方法。因此<code>df[1, 1]</code>會取出第一行第一列，也就是第一筆資料的第一個vector。<code>df[2, 3]</code>則會取出第二筆資料的第三個variable。</li>
<li>下面的例子<code>nrow(df)</code>為1894，有1894筆資料，所以自然df<span class="math inline">\(import與df\)</span>export的長度都是1894。因此，比較這兩個變數的大小會得到一個長度為1894的boolean (logical) variable。因此把這個長度為1894、充滿TRUE和FALSE的logical vector丟進df的row之處，因為取自df，大小判斷式結果的長度自然和原本的df的列數相同。因此當這個TRUE/FALSE被丟在df的列之處，便會篩選出<code>import</code>大於<code>p.xport</code>的數值。</li>
<li>原本的df有五個variable，而上述的操作是篩選資料，所以被篩選的是列，因此行的數量、名稱都不會變。因此，我篩選完後，直接存取這個被篩選過的data.frame的country variable，自然是可以的。</li>
</ul>
<div class="sourceCode" id="cb183"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb183-1"><a href="dataframe.html#cb183-1"></a>df</span></code></pre></div>
<pre><code>##    country import export    sub
## 1       CN 26.142 22.987  3.155
## 2       US 12.008 12.204 -0.196
## 3       JP  7.032 11.837 -4.805
## 4       HK 13.646  7.739  5.907
## 5       KR  4.589  5.381 -0.792
## 6       SG  5.768  4.610  1.158
## 7       DE  2.131  2.866 -0.735
## 8       MY  2.802  2.784  0.018
## 9       VN  3.428  2.414  1.014
## 10      PH  3.019  2.092  0.927
## 11      TH  1.976  1.839  0.137
## 12      AU  1.118  1.788 -0.670
## 13      NL  1.624  1.665 -0.041
## 14      SA  0.449  1.409 -0.960
## 15      ID  0.983  1.391 -0.408
## 16      GB  1.302  1.075  0.227
## 17      IN  1.027  0.974  0.053
## 18      FR  0.553  0.899 -0.346
## 19      IT  0.670  0.800 -0.130
## 20      AE  0.455  0.728 -0.273</code></pre>
<div class="sourceCode" id="cb185"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb185-1"><a href="dataframe.html#cb185-1"></a><span class="kw">names</span>(df)</span></code></pre></div>
<pre><code>## [1] &quot;country&quot; &quot;import&quot;  &quot;export&quot;  &quot;sub&quot;</code></pre>
<div class="sourceCode" id="cb187"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb187-1"><a href="dataframe.html#cb187-1"></a><span class="kw">nrow</span>(df)</span></code></pre></div>
<pre><code>## [1] 20</code></pre>
<div class="sourceCode" id="cb189"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb189-1"><a href="dataframe.html#cb189-1"></a><span class="co"># filter row data by column value</span></span>
<span id="cb189-2"><a href="dataframe.html#cb189-2"></a>df[df<span class="op">$</span>import <span class="op">&gt;</span><span class="st"> </span>df<span class="op">$</span>export,]</span></code></pre></div>
<pre><code>##    country import export   sub
## 1       CN 26.142 22.987 3.155
## 4       HK 13.646  7.739 5.907
## 6       SG  5.768  4.610 1.158
## 8       MY  2.802  2.784 0.018
## 9       VN  3.428  2.414 1.014
## 10      PH  3.019  2.092 0.927
## 11      TH  1.976  1.839 0.137
## 16      GB  1.302  1.075 0.227
## 17      IN  1.027  0.974 0.053</code></pre>
<div class="sourceCode" id="cb191"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb191-1"><a href="dataframe.html#cb191-1"></a>df[df<span class="op">$</span>import <span class="op">&gt;</span><span class="st"> </span>df<span class="op">$</span>export,]<span class="op">$</span>country</span></code></pre></div>
<pre><code>## [1] &quot;CN&quot; &quot;HK&quot; &quot;SG&quot; &quot;MY&quot; &quot;VN&quot; &quot;PH&quot; &quot;TH&quot; &quot;GB&quot; &quot;IN&quot;</code></pre>
<div class="sourceCode" id="cb193"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb193-1"><a href="dataframe.html#cb193-1"></a>df[df<span class="op">$</span>import <span class="op">&gt;</span><span class="st"> </span>df<span class="op">$</span>export,<span class="dv">1</span>]</span></code></pre></div>
<pre><code>## [1] &quot;CN&quot; &quot;HK&quot; &quot;SG&quot; &quot;MY&quot; &quot;VN&quot; &quot;PH&quot; &quot;TH&quot; &quot;GB&quot; &quot;IN&quot;</code></pre>
<div class="sourceCode" id="cb195"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb195-1"><a href="dataframe.html#cb195-1"></a><span class="co"># 1 row == a data.frame with only one data entry</span></span>
<span id="cb195-2"><a href="dataframe.html#cb195-2"></a><span class="kw">class</span>(df[df<span class="op">$</span>import <span class="op">&gt;</span><span class="st"> </span>df<span class="op">$</span>export,<span class="dv">1</span>])</span></code></pre></div>
<pre><code>## [1] &quot;character&quot;</code></pre>
<div class="sourceCode" id="cb197"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb197-1"><a href="dataframe.html#cb197-1"></a><span class="kw">class</span>(df[,<span class="dv">1</span>]) <span class="co"># character vector</span></span></code></pre></div>
<pre><code>## [1] &quot;character&quot;</code></pre>
<div class="sourceCode" id="cb199"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb199-1"><a href="dataframe.html#cb199-1"></a><span class="kw">class</span>(df[<span class="dv">1</span>,]) <span class="co"># data.frame</span></span></code></pre></div>
<pre><code>## [1] &quot;data.frame&quot;</code></pre>
<div class="sourceCode" id="cb201"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb201-1"><a href="dataframe.html#cb201-1"></a><span class="kw">class</span>(<span class="kw">unlist</span>(df[<span class="dv">1</span>, <span class="dv">-1</span>])) <span class="co"># filter the 1st row and select all columns except 1</span></span></code></pre></div>
<pre><code>## [1] &quot;numeric&quot;</code></pre>
</div>
<div id="sorting-排序按照某個變數排序" class="section level3" number="4.3.4">
<h3><span class="header-section-number">4.3.4</span> sorting 排序：按照某個變數排序</h3>
<p><code>df.sorted &lt;- df[order(df$import),]</code>會使得整個df照<code>import</code>的大小排序重新做排列。因為<code>order(df$import)</code>會把資料照指定順序排列後的位置傳回來，所以把他丟給<code>df</code>的列的位置，便會使得<code>df</code>的資料照指定的順序排列。
預設是由小到大，加上<code>decreasing = T</code>這個參數後變成由大而小。</p>
<div class="sourceCode" id="cb203"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb203-1"><a href="dataframe.html#cb203-1"></a><span class="co"># sort rows by df$import column</span></span>
<span id="cb203-2"><a href="dataframe.html#cb203-2"></a>df.sorted &lt;-<span class="st"> </span>df[<span class="kw">order</span>(df<span class="op">$</span>import),]</span>
<span id="cb203-3"><a href="dataframe.html#cb203-3"></a><span class="co"># View(df.sorted)</span></span>
<span id="cb203-4"><a href="dataframe.html#cb203-4"></a></span>
<span id="cb203-5"><a href="dataframe.html#cb203-5"></a><span class="co"># sort rows in decreasing order</span></span>
<span id="cb203-6"><a href="dataframe.html#cb203-6"></a>df.sorted &lt;-<span class="st"> </span>df[<span class="kw">order</span>(df<span class="op">$</span>import, <span class="dt">decreasing =</span> T),]</span>
<span id="cb203-7"><a href="dataframe.html#cb203-7"></a></span>
<span id="cb203-8"><a href="dataframe.html#cb203-8"></a><span class="co"># add - to column in order() can sort in decreasing order</span></span>
<span id="cb203-9"><a href="dataframe.html#cb203-9"></a>df.sorted &lt;-<span class="st"> </span>df[<span class="kw">order</span>(<span class="op">-</span>df<span class="op">$</span>import),]</span>
<span id="cb203-10"><a href="dataframe.html#cb203-10"></a></span>
<span id="cb203-11"><a href="dataframe.html#cb203-11"></a><span class="kw">head</span>(df.sorted)</span></code></pre></div>
<pre><code>##   country import export    sub
## 1      CN 26.142 22.987  3.155
## 4      HK 13.646  7.739  5.907
## 2      US 12.008 12.204 -0.196
## 3      JP  7.032 11.837 -4.805
## 6      SG  5.768  4.610  1.158
## 5      KR  4.589  5.381 -0.792</code></pre>
</div>
</div>
<div id="more-1" class="section level2" number="4.4">
<h2><span class="header-section-number">4.4</span> MORE</h2>
<div id="plotting" class="section level3" number="4.4.1">
<h3><span class="header-section-number">4.4.1</span> Plotting</h3>
<p><code>graphics::plot()</code>為會預載入R的繪圖套件，如果希望繪圖的同時加上回歸線和資料點標籤的話，必須要三行一起執行。</p>
<div class="sourceCode" id="cb205"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb205-1"><a href="dataframe.html#cb205-1"></a><span class="co"># plot(df) # raise error, 1st column is a character vector</span></span>
<span id="cb205-2"><a href="dataframe.html#cb205-2"></a><span class="kw">plot</span>(df[, <span class="dv">2</span><span class="op">:</span><span class="dv">3</span>])</span></code></pre></div>
<p><img src="PDR_files/figure-html/plotting-1.png" width="672" /></p>
<div class="sourceCode" id="cb206"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb206-1"><a href="dataframe.html#cb206-1"></a><span class="kw">plot</span>(df[<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>, <span class="dv">2</span><span class="op">:</span><span class="dv">3</span>])</span>
<span id="cb206-2"><a href="dataframe.html#cb206-2"></a><span class="kw">text</span>(import, export, <span class="dt">labels=</span>country, <span class="dt">cex=</span> <span class="fl">0.5</span>, <span class="dt">pos=</span><span class="dv">3</span>)</span>
<span id="cb206-3"><a href="dataframe.html#cb206-3"></a><span class="kw">lines</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">25</span>, <span class="dv">1</span><span class="op">:</span><span class="dv">25</span>, <span class="dt">col=</span><span class="st">&#39;red&#39;</span>)</span></code></pre></div>
<p><img src="PDR_files/figure-html/plotting-2.png" width="672" /></p>
<div class="sourceCode" id="cb207"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb207-1"><a href="dataframe.html#cb207-1"></a>?plot</span></code></pre></div>
</div>
<div id="using-dplyr" class="section level3" number="4.4.2">
<h3><span class="header-section-number">4.4.2</span> Using dplyr</h3>
<div class="sourceCode" id="cb208"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb208-1"><a href="dataframe.html#cb208-1"></a><span class="kw">library</span>(dplyr)</span></code></pre></div>
<pre><code>## Warning: package &#39;dplyr&#39; was built under R version 3.5.2</code></pre>
<pre><code>## 
## Attaching package: &#39;dplyr&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:stats&#39;:
## 
##     filter, lag</code></pre>
<pre><code>## The following objects are masked from &#39;package:base&#39;:
## 
##     intersect, setdiff, setequal, union</code></pre>
<div class="sourceCode" id="cb213"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb213-1"><a href="dataframe.html#cb213-1"></a>df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(country, import, export, <span class="dt">stringsAsFactors =</span> F)</span>
<span id="cb213-2"><a href="dataframe.html#cb213-2"></a>df &lt;-<span class="st"> </span><span class="kw">mutate</span>(df, <span class="dt">sub =</span> import <span class="op">-</span><span class="st"> </span>export)</span>
<span id="cb213-3"><a href="dataframe.html#cb213-3"></a><span class="kw">filter</span>(df, import <span class="op">&gt;</span><span class="st"> </span>export)</span></code></pre></div>
<pre><code>##   country import export   sub
## 1      CN 26.142 22.987 3.155
## 2      HK 13.646  7.739 5.907
## 3      SG  5.768  4.610 1.158
## 4      MY  2.802  2.784 0.018
## 5      VN  3.428  2.414 1.014
## 6      PH  3.019  2.092 0.927
## 7      TH  1.976  1.839 0.137
## 8      GB  1.302  1.075 0.227
## 9      IN  1.027  0.974 0.053</code></pre>
<div class="sourceCode" id="cb215"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb215-1"><a href="dataframe.html#cb215-1"></a><span class="kw">select</span>(df, <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">3</span>))</span></code></pre></div>
<pre><code>##    country export
## 1       CN 22.987
## 2       US 12.204
## 3       JP 11.837
## 4       HK  7.739
## 5       KR  5.381
## 6       SG  4.610
## 7       DE  2.866
## 8       MY  2.784
## 9       VN  2.414
## 10      PH  2.092
## 11      TH  1.839
## 12      AU  1.788
## 13      NL  1.665
## 14      SA  1.409
## 15      ID  1.391
## 16      GB  1.075
## 17      IN  0.974
## 18      FR  0.899
## 19      IT  0.800
## 20      AE  0.728</code></pre>

</div>
</div>
<div id="character-operations" class="section level2" number="4.5">
<h2><span class="header-section-number">4.5</span> Character operations</h2>
<div id="character-operations-1" class="section level3" number="4.5.1">
<h3><span class="header-section-number">4.5.1</span> Character operations</h3>
<div class="sourceCode" id="cb217"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb217-1"><a href="dataframe.html#cb217-1"></a>a &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="dv">11</span>, <span class="dv">55</span>, <span class="dv">11</span>)</span>
<span id="cb217-2"><a href="dataframe.html#cb217-2"></a><span class="kw">paste</span>(<span class="st">&quot;A&quot;</span>, a)       <span class="co"># concatenate</span></span></code></pre></div>
<pre><code>## [1] &quot;A 11&quot; &quot;A 22&quot; &quot;A 33&quot; &quot;A 44&quot; &quot;A 55&quot;</code></pre>
<div class="sourceCode" id="cb219"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb219-1"><a href="dataframe.html#cb219-1"></a><span class="kw">paste0</span>(<span class="st">&quot;A&quot;</span>, a)      <span class="co"># concatenate</span></span></code></pre></div>
<pre><code>## [1] &quot;A11&quot; &quot;A22&quot; &quot;A33&quot; &quot;A44&quot; &quot;A55&quot;</code></pre>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="vector.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="date-and-time.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": null,
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection",
"scroll_highlight": true
},
"toolbar": {
"position": "fixed"
},
"search": true,
"info": true
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
