<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 1 R basic | Playing Data with R</title>
  <meta name="description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
  <meta name="generator" content="bookdown 0.17 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 1 R basic | Playing Data with R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
  <meta name="github-repo" content="P4CSS/PDR" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 1 R basic | Playing Data with R" />
  
  <meta name="twitter:description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
  

<meta name="author" content="JILUNG HSIEH" />


<meta name="date" content="2020-02-14" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="index.html"/>

<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">A Minimal Book Example</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>About</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#自述"><i class="fa fa-check"></i>自述</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#學程式這回事"><i class="fa fa-check"></i>學程式這回事</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#何謂演算法"><i class="fa fa-check"></i>何謂演算法？</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#掌握課外學習資源"><i class="fa fa-check"></i>掌握課外學習資源</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>I Part I Data Acquisition</b></span></li>
<li class="chapter" data-level="1" data-path="r-basic.html"><a href="r-basic.html"><i class="fa fa-check"></i><b>1</b> R basic</a><ul>
<li class="chapter" data-level="" data-path="r-basic.html"><a href="r-basic.html#preface"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1.1" data-path="r-basic.html"><a href="r-basic.html#rstudio-基本操作"><i class="fa fa-check"></i><b>1.1</b> RStudio 基本操作</a><ul>
<li class="chapter" data-level="1.1.1" data-path="r-basic.html"><a href="r-basic.html#執行r-markdown"><i class="fa fa-check"></i><b>1.1.1</b> 執行R Markdown</a></li>
<li class="chapter" data-level="1.1.2" data-path="r-basic.html"><a href="r-basic.html#安裝與載入套件"><i class="fa fa-check"></i><b>1.1.2</b> 安裝與載入套件</a></li>
<li class="chapter" data-level="1.1.3" data-path="r-basic.html"><a href="r-basic.html#載入第三方套件"><i class="fa fa-check"></i><b>1.1.3</b> 載入第三方套件</a></li>
<li class="chapter" data-level="1.1.4" data-path="r-basic.html"><a href="r-basic.html#註解"><i class="fa fa-check"></i><b>1.1.4</b> 註解</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="r-basic.html"><a href="r-basic.html#hellow-world-載入資料"><i class="fa fa-check"></i><b>1.2</b> Hellow World! 載入資料</a><ul>
<li class="chapter" data-level="1.2.1" data-path="r-basic.html"><a href="r-basic.html#載入dcard資料"><i class="fa fa-check"></i><b>1.2.1</b> 載入Dcard資料</a></li>
<li class="chapter" data-level="1.2.2" data-path="r-basic.html"><a href="r-basic.html#getting-taipei-theft-report-data"><i class="fa fa-check"></i><b>1.2.2</b> Getting Taipei theft report data</a></li>
<li class="chapter" data-level="1.2.3" data-path="r-basic.html"><a href="r-basic.html#loading-moi-data-through-api"><i class="fa fa-check"></i><b>1.2.3</b> Loading MOI data through API</a></li>
<li class="chapter" data-level="1.2.4" data-path="r-basic.html"><a href="r-basic.html#getting-104-query-data"><i class="fa fa-check"></i><b>1.2.4</b> Getting 104 query data</a></li>
<li class="chapter" data-level="1.2.5" data-path="r-basic.html"><a href="r-basic.html#getting-ubike-data"><i class="fa fa-check"></i><b>1.2.5</b> Getting ubike data</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="r-basic.html"><a href="r-basic.html#r的基本語法"><i class="fa fa-check"></i><b>1.3</b> R的基本語法</a><ul>
<li class="chapter" data-level="1.3.1" data-path="r-basic.html"><a href="r-basic.html#assignment"><i class="fa fa-check"></i><b>1.3.1</b> Assignment</a></li>
<li class="chapter" data-level="1.3.2" data-path="r-basic.html"><a href="r-basic.html#註解-comment"><i class="fa fa-check"></i><b>1.3.2</b> 註解 (Comment)</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="r-basic.html"><a href="r-basic.html#vector"><i class="fa fa-check"></i><b>1.4</b> Vector</a><ul>
<li class="chapter" data-level="1.4.1" data-path="r-basic.html"><a href="r-basic.html#建立vector"><i class="fa fa-check"></i><b>1.4.1</b> 建立Vector</a></li>
<li class="chapter" data-level="1.4.2" data-path="r-basic.html"><a href="r-basic.html#查看vector的內容"><i class="fa fa-check"></i><b>1.4.2</b> 查看Vector的內容</a></li>
<li class="chapter" data-level="1.4.3" data-path="r-basic.html"><a href="r-basic.html#subsetting-filtering"><i class="fa fa-check"></i><b>1.4.3</b> Subsetting, filtering</a></li>
<li class="chapter" data-level="1.4.4" data-path="r-basic.html"><a href="r-basic.html#deleting"><i class="fa fa-check"></i><b>1.4.4</b> Deleting</a></li>
<li class="chapter" data-level="1.4.5" data-path="r-basic.html"><a href="r-basic.html#concatinating"><i class="fa fa-check"></i><b>1.4.5</b> Concatinating</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="r-basic.html"><a href="r-basic.html#computing-vectors"><i class="fa fa-check"></i><b>1.5</b> Computing vectors</a><ul>
<li class="chapter" data-level="1.5.1" data-path="r-basic.html"><a href="r-basic.html#arithmetic-operations"><i class="fa fa-check"></i><b>1.5.1</b> Arithmetic operations</a></li>
<li class="chapter" data-level="1.5.2" data-path="r-basic.html"><a href="r-basic.html#logic-comparisons"><i class="fa fa-check"></i><b>1.5.2</b> Logic comparisons</a></li>
<li class="chapter" data-level="1.5.3" data-path="r-basic.html"><a href="r-basic.html#subsetting-by-logic-comparisons"><i class="fa fa-check"></i><b>1.5.3</b> Subsetting by logic comparisons</a></li>
<li class="chapter" data-level="1.5.4" data-path="r-basic.html"><a href="r-basic.html#sorting-and-ordering"><i class="fa fa-check"></i><b>1.5.4</b> Sorting and ordering</a></li>
<li class="chapter" data-level="1.5.5" data-path="r-basic.html"><a href="r-basic.html#built-in-math-functions"><i class="fa fa-check"></i><b>1.5.5</b> Built-in math functions</a></li>
</ul></li>
<li class="chapter" data-level="1.6" data-path="r-basic.html"><a href="r-basic.html#data-types"><i class="fa fa-check"></i><b>1.6</b> Data types</a><ul>
<li class="chapter" data-level="1.6.1" data-path="r-basic.html"><a href="r-basic.html#checking-data-type"><i class="fa fa-check"></i><b>1.6.1</b> Checking data type</a></li>
<li class="chapter" data-level="1.6.2" data-path="r-basic.html"><a href="r-basic.html#converting-data-type"><i class="fa fa-check"></i><b>1.6.2</b> Converting data type</a></li>
</ul></li>
<li class="chapter" data-level="1.7" data-path="r-basic.html"><a href="r-basic.html#character-operations"><i class="fa fa-check"></i><b>1.7</b> Character operations</a><ul>
<li class="chapter" data-level="1.7.1" data-path="r-basic.html"><a href="r-basic.html#character-operations-1"><i class="fa fa-check"></i><b>1.7.1</b> Character operations</a></li>
</ul></li>
<li class="chapter" data-level="1.8" data-path="r-basic.html"><a href="r-basic.html#data1-taipei-city-population-data"><i class="fa fa-check"></i><b>1.8</b> Data1: Taipei city population data</a><ul>
<li class="chapter" data-level="1.8.1" data-path="r-basic.html"><a href="r-basic.html#copying-data-and-creating-vectors"><i class="fa fa-check"></i><b>1.8.1</b> Copying data and creating vectors</a></li>
<li class="chapter" data-level="1.8.2" data-path="r-basic.html"><a href="r-basic.html#building-a-data.frame"><i class="fa fa-check"></i><b>1.8.2</b> Building a data.frame</a></li>
</ul></li>
<li class="chapter" data-level="1.9" data-path="r-basic.html"><a href="r-basic.html#data2-importexport-data-of-taiwan"><i class="fa fa-check"></i><b>1.9</b> Data2: Import/Export data of Taiwan</a><ul>
<li class="chapter" data-level="1.9.1" data-path="r-basic.html"><a href="r-basic.html#combining-3-vectors-to-a-data.frame"><i class="fa fa-check"></i><b>1.9.1</b> Combining 3 vectors to a data.frame</a></li>
</ul></li>
<li class="chapter" data-level="1.10" data-path="r-basic.html"><a href="r-basic.html#observing-data.frame"><i class="fa fa-check"></i><b>1.10</b> Observing data.frame</a><ul>
<li class="chapter" data-level="1.10.1" data-path="r-basic.html"><a href="r-basic.html#data-dimension-inspecting"><i class="fa fa-check"></i><b>1.10.1</b> Data dimension inspecting</a></li>
</ul></li>
<li class="chapter" data-level="1.11" data-path="r-basic.html"><a href="r-basic.html#getting-one-variable-from-a-data.frame"><i class="fa fa-check"></i><b>1.11</b> Getting one variable from a data.frame</a></li>
<li class="chapter" data-level="1.12" data-path="r-basic.html"><a href="r-basic.html#mutate-透過運算產生新變數"><i class="fa fa-check"></i><b>1.12</b> mutate 透過運算產生新變數</a></li>
<li class="chapter" data-level="1.13" data-path="r-basic.html"><a href="r-basic.html#filter-select-篩選資料選取變數"><i class="fa fa-check"></i><b>1.13</b> filter, select 篩選資料、選取變數</a></li>
<li class="chapter" data-level="1.14" data-path="r-basic.html"><a href="r-basic.html#sorting-排序按照某個變數排序"><i class="fa fa-check"></i><b>1.14</b> sorting 排序：按照某個變數排序</a></li>
<li class="chapter" data-level="1.15" data-path="r-basic.html"><a href="r-basic.html#plotting"><i class="fa fa-check"></i><b>1.15</b> Plotting</a></li>
<li class="chapter" data-level="1.16" data-path="r-basic.html"><a href="r-basic.html#more-using-dplyr"><i class="fa fa-check"></i><b>1.16</b> More: using dplyr</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Playing Data with R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="r-basic" class="section level1">
<h1><span class="header-section-number">Chapter 1</span> R basic</h1>
<div id="preface" class="section level2 unnumbered">
<h2>Preface</h2>
<p>Description here</p>

</div>
<div id="rstudio-基本操作" class="section level2">
<h2><span class="header-section-number">1.1</span> RStudio 基本操作</h2>
<div id="執行r-markdown" class="section level3">
<h3><span class="header-section-number">1.1.1</span> 執行R Markdown</h3>
<ul>
<li>Using <code>Cmd+Enter</code> (<code>Ctrl+Enter</code> in Window) to excute the line where your cursor is located.</li>
<li>Using <code>Cmd(Ctrl)+Shift+Enter</code> to run all code in a cell</li>
<li>Using <code>Cmd(Ctrl)+Option(Alt)+i</code> to insert a new cell</li>
<li>Using mouse to select multiple lines, then <code>Cmd(Ctrl)+Shift+c</code> to comment/uncomment multiple lines.</li>
</ul>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1">a &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>)</a>
<a class="sourceLine" id="cb2-2" data-line-number="2">b &lt;-<span class="st"> </span><span class="dv">4</span></a>
<a class="sourceLine" id="cb2-3" data-line-number="3">a<span class="op">*</span>b</a></code></pre></div>
<pre><code>## [1]  4  8 12 16 20</code></pre>
</div>
<div id="安裝與載入套件" class="section level3">
<h3><span class="header-section-number">1.1.2</span> 安裝與載入套件</h3>
<p>套件的使用分為<strong>安裝</strong>和<strong>載入</strong>兩個動作。通常安裝好R的時候就已經安裝好基本<code>base</code>套件。當執行R時便會將base套件<strong>預載</strong>入程式的執行環境中。非常多的R使用者會編寫第三方套件，並且將這些套件開放給群眾使用。通常這些套件已經被上載到<strong>R cran</strong>提供下載。而<strong>R cran</strong>上的套件我們可以使用<code>install.packages(&quot;package_name&quot;)</code>來自動安裝到我們的電腦中。</p>

<div class="exercise">
<span id="exr:unnamed-chunk-2" class="exercise"><strong>Exercise 1.1  (Installing packages)  </strong></span>安裝以下套件：<code>tidyverse</code>, <code>caret</code>, <code>jiebaR</code>, <code>stm</code>, <code>sf</code>
</div>

</div>
<div id="載入第三方套件" class="section level3">
<h3><span class="header-section-number">1.1.3</span> 載入第三方套件</h3>
<p>這些第三方套件被安裝好後，還需要被<strong>加載</strong>到程式的執行環境中才可以使用。因此要用<code>library(package_name)</code>將其載入。</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="kw">library</span>(jsonlite)</a>
<a class="sourceLine" id="cb4-2" data-line-number="2"><span class="kw">library</span>(httr)</a></code></pre></div>
<pre><code>## Warning: package &#39;httr&#39; was built under R version 3.5.2</code></pre>

<div class="exercise">
<span id="exr:unnamed-chunk-4" class="exercise"><strong>Exercise 1.2  (Loading packages)  </strong></span>用<code>library(package_name)</code>載入已經安裝好的<code>jsonlite</code>與<code>httr</code>
</div>

</div>
<div id="註解" class="section level3">
<h3><span class="header-section-number">1.1.4</span> 註解</h3>
<p>下列程式碼中開頭有<code>#</code>符號者為註解，程式在執行時會自動忽略前面有<code>#</code>符號的程式碼。</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="co"># a &lt;- c(1, 2, 3, 4, 5)</span></a>
<a class="sourceLine" id="cb6-2" data-line-number="2"><span class="co"># b &lt;- 4</span></a>
<a class="sourceLine" id="cb6-3" data-line-number="3"><span class="co"># a*b</span></a></code></pre></div>
</div>
</div>
<div id="hellow-world-載入資料" class="section level2">
<h2><span class="header-section-number">1.2</span> Hellow World! 載入資料</h2>
<div id="載入dcard資料" class="section level3">
<h3><span class="header-section-number">1.2.1</span> 載入Dcard資料</h3>
<p>先不要去管以下程式碼<code>fromJSON(content(GET(url), &quot;text&quot;))</code>是什麼意思，先著重在語言的形式。通常一個函式會寫為<code>func_name()</code>，所以上述其實是三個函式由內而外一層套一層，從最內層開始往外做。這其實很make-sense，因為如果你有一個數學式<code>(1 + (3-3)/2)/8</code>，也是會從最裡面那層做出來。</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1">url &lt;-<span class="st"> &quot;https://www.dcard.tw/_api/forums/relationship/posts?popular=true&quot;</span></a>
<a class="sourceLine" id="cb7-2" data-line-number="2">res &lt;-<span class="st"> </span><span class="kw">fromJSON</span>(<span class="kw">content</span>(<span class="kw">GET</span>(url), <span class="st">&quot;text&quot;</span>))</a>
<a class="sourceLine" id="cb7-3" data-line-number="3">dplyr<span class="op">::</span><span class="kw">glimpse</span>(res)</a></code></pre></div>
<pre><code>## Observations: 30
## Variables: 33
## $ id                  &lt;int&gt; 233008068, 233062888, 233066495, 233061385, 23306…
## $ title               &lt;chr&gt; &quot;#2/13更連結 曬照 閃光團v.s單身汪攻防戰！&quot;, &quot;洗澡的小情趣&quot;, &quot;早上起床發現...…
## $ excerpt             &lt;chr&gt; &quot;#2/13 更，WOW~看到兩邊人馬的熱烈曬照，販販刷留言刷得很開心吶～～～好多甜甜的閃閃的告白…
## $ anonymousSchool     &lt;lgl&gt; FALSE, FALSE, TRUE, TRUE, TRUE, TRUE, FALSE, TRUE…
## $ anonymousDepartment &lt;lgl&gt; TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, T…
## $ pinned              &lt;lgl&gt; TRUE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, F…
## $ forumId             &lt;chr&gt; &quot;42851318-b9e2-4a75-8a05-9fe180becefe&quot;, &quot;42851318…
## $ replyId             &lt;int&gt; NA, NA, NA, 233054425, NA, NA, NA, NA, 233055406,…
## $ createdAt           &lt;chr&gt; &quot;2020-02-03T10:10:21.780Z&quot;, &quot;2020-02-12T11:04:15.…
## $ updatedAt           &lt;chr&gt; &quot;2020-02-13T15:19:06.798Z&quot;, &quot;2020-02-13T16:00:40.…
## $ commentCount        &lt;int&gt; 989, 75, 80, 1017, 210, 68, 4717, 498, 239, 31, 4…
## $ likeCount           &lt;int&gt; 2456, 8950, 3945, 3895, 3491, 3462, 2884, 2198, 1…
## $ withNickname        &lt;lgl&gt; TRUE, TRUE, FALSE, FALSE, FALSE, FALSE, TRUE, FAL…
## $ tags                &lt;list&gt; [&lt;&gt;, &lt;&gt;, &lt;&gt;, &lt;&gt;, &quot;HIDE_THUMBNAIL&quot;, &quot;HIDE_THUMBNA…
## $ topics              &lt;list&gt; [&lt;&quot;單身狗&quot;, &quot;愛你3000次&quot;, &quot;閃光團&quot;, &quot;送禮&quot;, &quot;情人節&quot;&gt;, &lt;&quot;男友&quot;, …
## $ meta                &lt;df[,2]&gt; &lt;data.frame[26 x 2]&gt;
## $ forumName           &lt;chr&gt; &quot;感情&quot;, &quot;感情&quot;, &quot;感情&quot;, &quot;感情&quot;, &quot;感情&quot;, &quot;感情&quot;, &quot;感情&quot;, &quot;感情&quot;, &quot;…
## $ forumAlias          &lt;chr&gt; &quot;relationship&quot;, &quot;relationship&quot;, &quot;relationship&quot;, &quot;…
## $ gender              &lt;chr&gt; &quot;D&quot;, &quot;F&quot;, &quot;F&quot;, &quot;M&quot;, &quot;F&quot;, &quot;M&quot;, &quot;M&quot;, &quot;F&quot;, &quot;M&quot;, &quot;F&quot;,…
## $ school              &lt;chr&gt; &quot;好物縱火販&quot;, &quot;シカマロ&quot;, NA, NA, NA, NA, &quot;好小子&quot;, NA, &quot;國立清華…
## $ department          &lt;chr&gt; &quot;ec_firemaker&quot;, &quot;naoko&quot;, NA, NA, NA, NA, &quot;toyot&quot;,…
## $ replyTitle          &lt;chr&gt; NA, NA, NA, &quot;2020還單身的都給我出來&quot;, NA, NA, NA, NA, &quot;男友的…
## $ mediaMeta           &lt;list&gt; [&lt;data.frame[7 x 8]&gt;, &lt;data.frame[3 x 10]&gt;, &lt;dat…
## $ reactions           &lt;list&gt; [&lt;data.frame[6 x 2]&gt;, &lt;data.frame[4 x 2]&gt;, &lt;data…
## $ hidden              &lt;lgl&gt; FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, …
## $ customStyle         &lt;df[,3]&gt; &lt;data.frame[26 x 3]&gt;
## $ isSuspiciousAccount &lt;lgl&gt; FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, …
## $ layout              &lt;chr&gt; &quot;classic&quot;, &quot;classic&quot;, &quot;classic&quot;, &quot;classic&quot;, &quot;clas…
## $ withImages          &lt;lgl&gt; TRUE, TRUE, TRUE, FALSE, FALSE, FALSE, TRUE, FALS…
## $ withVideos          &lt;lgl&gt; FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, …
## $ media               &lt;list&gt; [&lt;data.frame[6 x 1]&gt;, &lt;data.frame[2 x 1]&gt;, &lt;data…
## $ reportReasonText    &lt;chr&gt; &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;…
## $ postAvatar          &lt;chr&gt; &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;…</code></pre>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1"><span class="kw">head</span>(res)</a></code></pre></div>
<pre><code>##          id                                    title
## 1 233008068 #2/13更連結 曬照 閃光團v.s單身汪攻防戰！
## 2 233062888                             洗澡的小情趣
## 3 233066495                          早上起床發現...
## 4 233061385                  2020單身脫魯 集氣許願樓
## 5 233063657                     讓我體驗有男友的感覺
## 6 233066796                     最嚮往的情侶生活模式
##                                                                                                                                                                                                     excerpt
## 1                          #2/13 更，WOW~看到兩邊人馬的熱烈曬照，販販刷留言刷得很開心吶～～～好多甜甜的閃閃的告白好ㄘ好ㄘヾ（´︶`*）ﾉ，更多好笑、可愛的狗勾....啊腫麼好多都4柴（´･ω･`）？（（嗯，有空來做留
## 2 男友‍️以下稱他為 那君，我和那君每天都會一起洗澡，昨天，我一如往常的低頭洗著我的頭髮（搓搓搓，那君：「我頭髮好像變長了欸！\U0001f929」我：「嗯？是喔」（努力的搓搓搓，兩人都沒有說話的，過了一小段時間後，那
## 3          今天早上起床之後突然回頭看到男友的手，咦！，他的手什麼時候這麼好看ㄌ！，好～再來一張，然後突然想到我的相簿裡有！剝蝦的手，好想當那隻蝦（⁎⁍̴̛\u1d17⁍̴̛⁎）（別ㄟ！，難怪我每次都超愛牽他的手，或是把他
## 4                                                          我想要脫魯 我想要脫魯 我想要脫魯，很重要許願三次，集氣集起來，祝2020單身狗 天上掉下來男/女朋友，------------------------------------------------
## 5             母胎單的朋友表示，說一句話讓她也能體驗有男友的感覺，所以姐妹們也是很努力，只是後面的對話越來越好笑，1 你要那麼想，我也沒有辦法。2 她只是朋友/妹妹而已。3 多喝熱水。4 沒事的話我打遊戲去了。5 
## 6  彼此都有一份穩定的工作，一起存錢買房，一起分享彼此工作上的大小事，當對方傾訴的垃圾桶，養隻陪伴彼此的寵物，每個禮拜兩人如果都有共同休假的日子，早上一起去吃個早午餐，下午去看場電影、遛遛狗；晚上可以自己
##   anonymousSchool anonymousDepartment pinned
## 1           FALSE                TRUE   TRUE
## 2           FALSE                TRUE  FALSE
## 3            TRUE                TRUE  FALSE
## 4            TRUE                TRUE  FALSE
## 5            TRUE                TRUE  FALSE
## 6            TRUE                TRUE  FALSE
##                                forumId   replyId                createdAt
## 1 42851318-b9e2-4a75-8a05-9fe180becefe        NA 2020-02-03T10:10:21.780Z
## 2 42851318-b9e2-4a75-8a05-9fe180becefe        NA 2020-02-12T11:04:15.011Z
## 3 42851318-b9e2-4a75-8a05-9fe180becefe        NA 2020-02-13T02:58:32.517Z
## 4 42851318-b9e2-4a75-8a05-9fe180becefe 233054425 2020-02-12T06:15:08.879Z
## 5 42851318-b9e2-4a75-8a05-9fe180becefe        NA 2020-02-12T13:27:18.597Z
## 6 42851318-b9e2-4a75-8a05-9fe180becefe        NA 2020-02-13T04:21:14.383Z
##                  updatedAt commentCount likeCount withNickname           tags
## 1 2020-02-13T15:19:06.798Z          989      2456         TRUE               
## 2 2020-02-13T16:00:40.450Z           75      8950         TRUE               
## 3 2020-02-13T15:44:25.655Z           80      3945        FALSE               
## 4 2020-02-13T17:10:46.446Z         1017      3895        FALSE               
## 5 2020-02-12T13:27:18.597Z          210      3491        FALSE HIDE_THUMBNAIL
## 6 2020-02-13T04:21:14.383Z           68      3462        FALSE HIDE_THUMBNAIL
##                                     topics meta.layout meta.disableAdSense
## 1 單身狗, 愛你3000次, 閃光團, 送禮, 情人節     classic                  NA
## 2                   男友, 日常, 洗澡, 情趣     classic                TRUE
## 3                               手控, 男友     classic                  NA
## 4                   單身, 愛情, 集氣, 許願     classic                  NA
## 5                                              classic                  NA
## 6                 愛情, 模式, 價值觀, 生活     classic                  NA
##   forumName   forumAlias gender     school   department             replyTitle
## 1      感情 relationship      D 好物縱火販 ec_firemaker                   &lt;NA&gt;
## 2      感情 relationship      F   シカマロ        naoko                   &lt;NA&gt;
## 3      感情 relationship      F       &lt;NA&gt;         &lt;NA&gt;                   &lt;NA&gt;
## 4      感情 relationship      M       &lt;NA&gt;         &lt;NA&gt; 2020還單身的都給我出來
## 5      感情 relationship      F       &lt;NA&gt;         &lt;NA&gt;                   &lt;NA&gt;
## 6      感情 relationship      M       &lt;NA&gt;         &lt;NA&gt;                   &lt;NA&gt;
##                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              mediaMeta
## 1                                                                                                                                                                                                                                                                                                                                                                                                                                                 d5e12314-ae52-4da6-b71e-f8fac079cde7, d5e12314-ae52-4da6-b71e-f8fac079cde7, 5f83bcae-f005-4dbf-b862-7591cb4929d6, 7084b3a6-ce06-4d1a-980a-86ba84376e0a, b94cd302-4c1f-4fc0-93ec-b63d77105d00, 1dfd20e5-ccc0-45e8-945f-810655619b02, f1bc2af8-bc23-4527-8221-a68d9e3b4848, https://i.imgur.com/OPDes1ml.jpg, http://i.imgur.com/OPDes1m.jpg, http://i.imgur.com/XCDhJ6e.png, http://i.imgur.com/bKejPOh.jpg, http://i.imgur.com/JrRu8b4.jpg, http://i.imgur.com/i5RdGvC.png, http://i.imgur.com/P8LgiYb.png, https://i.imgur.com/OPDes1ml.jpg, https://imgur.com/OPDes1m, https://imgur.com/XCDhJ6e, https://imgur.com/bKejPOh, https://imgur.com/JrRu8b4, https://imgur.com/i5RdGvC, https://imgur.com/P8LgiYb, https://i.imgur.com/OPDes1ml.jpg, https://i.imgur.com/OPDes1ml.jpg, https://i.imgur.com/XCDhJ6el.jpg, https://i.imgur.com/bKejPOhl.jpg, https://i.imgur.com/JrRu8b4l.jpg, https://i.imgur.com/i5RdGvCl.jpg, https://i.imgur.com/P8LgiYbl.jpg, image/thumbnail, image/imgur, image/imgur, image/imgur, image/imgur, image/imgur, image/imgur, ANNOTATED, ANNOTATED, ANNOTATED, ANNOTATED, ANNOTATED, ANNOTATED, ANNOTATED, 2020-02-03T10:21:25.830Z, 2020-02-03T10:21:25.830Z, 2020-02-03T11:54:01.577Z, 2020-02-03T10:21:25.830Z, 2020-02-03T10:21:25.830Z, 2020-02-03T10:21:25.830Z, 2020-02-03T10:21:25.830Z, 2020-02-13T15:19:06.798Z, 2020-02-13T15:19:06.798Z, 2020-02-13T15:19:06.798Z, 2020-02-13T15:19:06.798Z, 2020-02-13T15:19:06.798Z, 2020-02-13T15:19:06.798Z, 2020-02-13T15:19:06.798Z
## 2                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         10a37035-7b28-4c58-b1c6-83319e5b8203, 613ee91a-4618-48ad-bc9d-4370175320b7, 10a37035-7b28-4c58-b1c6-83319e5b8203, https://megapx-assets.dcard.tw/images/31d33e04-4926-4dd1-a743-55c9cfe872d7/640.jpeg, https://megapx-assets.dcard.tw/images/5fa1beb8-7edd-4836-aff4-089f5880be10/1280.jpeg, https://megapx-assets.dcard.tw/images/31d33e04-4926-4dd1-a743-55c9cfe872d7/1280.jpeg, https://megapx-assets.dcard.tw/images/31d33e04-4926-4dd1-a743-55c9cfe872d7/640.jpeg, https://megapx.dcard.tw/v1/images/5fa1beb8-7edd-4836-aff4-089f5880be10, https://megapx.dcard.tw/v1/images/31d33e04-4926-4dd1-a743-55c9cfe872d7, https://megapx-assets.dcard.tw/images/31d33e04-4926-4dd1-a743-55c9cfe872d7/640.jpeg, https://megapx-assets.dcard.tw/images/5fa1beb8-7edd-4836-aff4-089f5880be10/640.jpeg, https://megapx-assets.dcard.tw/images/31d33e04-4926-4dd1-a743-55c9cfe872d7/640.jpeg, image/thumbnail, image/megapx, image/megapx, ANNOTATED, GOOGLE_VISION_ADULT_VERY_LIKELY, SAFE, ANNOTATED, POSSIBLY_UNSAFE, GOOGLE_VISION_ADULT_LIKELY, ANNOTATED, GOOGLE_VISION_ADULT_VERY_LIKELY, SAFE, 2020-02-12T11:04:15.011Z, 2020-02-13T06:58:01.888Z, 2020-02-12T11:04:15.011Z, 2020-02-13T16:00:40.450Z, 2020-02-13T16:00:40.450Z, 2020-02-13T16:00:40.450Z, 452, 1414, 1414, 640, 2000, 2000
## 3 8b5c28d7-d435-429f-b01f-73939ee229ba, 8b5c28d7-d435-429f-b01f-73939ee229ba, d0a4becd-24b4-4fa9-b562-fd3cef9cebb6, f60cbc44-2d7d-4aa4-8d00-bc2b513c71c2, 7b009eb2-fdc8-4309-9bb3-0a59458514ed, https://megapx-assets.dcard.tw/images/089887e6-dc3c-405b-8e47-972048748d65/640.jpeg, https://megapx-assets.dcard.tw/images/089887e6-dc3c-405b-8e47-972048748d65/1280.jpeg, https://megapx-assets.dcard.tw/images/bc599ba3-e605-4074-a208-55cbeaf3ded4/1280.jpeg, https://megapx-assets.dcard.tw/images/3699aaae-c7cd-43bf-bb3c-b5c853a405df/full.jpeg, https://megapx-assets.dcard.tw/images/b6386d6f-2e5f-414c-8be8-dfcc3b27d12d/1280.jpeg, https://megapx-assets.dcard.tw/images/089887e6-dc3c-405b-8e47-972048748d65/640.jpeg, https://megapx.dcard.tw/v1/images/089887e6-dc3c-405b-8e47-972048748d65, https://megapx.dcard.tw/v1/images/bc599ba3-e605-4074-a208-55cbeaf3ded4, https://megapx.dcard.tw/v1/images/3699aaae-c7cd-43bf-bb3c-b5c853a405df, https://megapx.dcard.tw/v1/images/b6386d6f-2e5f-414c-8be8-dfcc3b27d12d, https://megapx-assets.dcard.tw/images/089887e6-dc3c-405b-8e47-972048748d65/640.jpeg, https://megapx-assets.dcard.tw/images/089887e6-dc3c-405b-8e47-972048748d65/640.jpeg, https://megapx-assets.dcard.tw/images/bc599ba3-e605-4074-a208-55cbeaf3ded4/640.jpeg, https://megapx-assets.dcard.tw/images/3699aaae-c7cd-43bf-bb3c-b5c853a405df/320.jpeg, https://megapx-assets.dcard.tw/images/b6386d6f-2e5f-414c-8be8-dfcc3b27d12d/640.jpeg, image/thumbnail, image/megapx, image/megapx, image/megapx, image/megapx, ANNOTATED, ANNOTATED, ANNOTATED, GOOGLE_VISION_ADULT_LIKELY, SAFE, ANNOTATED, ANNOTATED, 2020-02-13T02:58:32.517Z, 2020-02-13T02:58:32.517Z, 2020-02-13T02:58:32.517Z, 2020-02-13T02:58:32.517Z, 2020-02-13T15:21:43.069Z, 2020-02-13T15:44:25.655Z, 2020-02-13T15:44:25.655Z, 2020-02-13T15:44:25.655Z, 2020-02-13T15:44:25.655Z, 2020-02-13T15:44:25.655Z, 360, 750, 1125, 479, 1122, 640, 1334, 2001, 470, 2000
## 4                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 NULL
## 5                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 NULL
## 6                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 NULL
##                                                                                                                                                                                                                                                   reactions
## 1 286f599c-f86a-4932-82f0-f5a06f1eca03, e8e6bc5d-41b0-4129-b134-97507523d7ff, aa0d425f-d530-4478-9a77-fe3aedc79eea, 514c2569-fd53-4d9d-a415-bf0f88e7329f, 4b018f48-e184-445f-adf1-fc8e04ba09b9, 011ead16-9b83-4729-9fde-c588920c6c2d, 2384, 51, 11, 7, 2, 1
## 2                                                                                  286f599c-f86a-4932-82f0-f5a06f1eca03, e8e6bc5d-41b0-4129-b134-97507523d7ff, 4b018f48-e184-445f-adf1-fc8e04ba09b9, aa0d425f-d530-4478-9a77-fe3aedc79eea, 8483, 449, 15, 3
## 3                                                                                    286f599c-f86a-4932-82f0-f5a06f1eca03, e8e6bc5d-41b0-4129-b134-97507523d7ff, 4b018f48-e184-445f-adf1-fc8e04ba09b9, 514c2569-fd53-4d9d-a415-bf0f88e7329f, 3891, 49, 3, 2
## 4                                                                                   286f599c-f86a-4932-82f0-f5a06f1eca03, e8e6bc5d-41b0-4129-b134-97507523d7ff, 514c2569-fd53-4d9d-a415-bf0f88e7329f, 011ead16-9b83-4729-9fde-c588920c6c2d, 3801, 54, 36, 4
## 5                                          286f599c-f86a-4932-82f0-f5a06f1eca03, e8e6bc5d-41b0-4129-b134-97507523d7ff, 514c2569-fd53-4d9d-a415-bf0f88e7329f, 4b018f48-e184-445f-adf1-fc8e04ba09b9, aa0d425f-d530-4478-9a77-fe3aedc79eea, 3205, 275, 9, 1, 1
## 6                                                                                    286f599c-f86a-4932-82f0-f5a06f1eca03, 514c2569-fd53-4d9d-a415-bf0f88e7329f, 011ead16-9b83-4729-9fde-c588920c6c2d, 4b018f48-e184-445f-adf1-fc8e04ba09b9, 3445, 15, 1, 1
##   hidden customStyle.label.text customStyle.label.bgColor
## 1  FALSE                   &lt;NA&gt;                      &lt;NA&gt;
## 2  FALSE                   &lt;NA&gt;                      &lt;NA&gt;
## 3  FALSE                   &lt;NA&gt;                      &lt;NA&gt;
## 4  FALSE                   &lt;NA&gt;                      &lt;NA&gt;
## 5  FALSE                   &lt;NA&gt;                      &lt;NA&gt;
## 6  FALSE                   &lt;NA&gt;                      &lt;NA&gt;
##   customStyle.headerColor customStyle.enableSupportCampaign isSuspiciousAccount
## 1                    &lt;NA&gt;                                NA               FALSE
## 2                    &lt;NA&gt;                                NA               FALSE
## 3                    &lt;NA&gt;                                NA               FALSE
## 4                    &lt;NA&gt;                                NA               FALSE
## 5                    &lt;NA&gt;                                NA               FALSE
## 6                    &lt;NA&gt;                                NA               FALSE
##    layout withImages withVideos
## 1 classic       TRUE      FALSE
## 2 classic       TRUE      FALSE
## 3 classic       TRUE      FALSE
## 4 classic      FALSE      FALSE
## 5 classic      FALSE      FALSE
## 6 classic      FALSE      FALSE
##                                                                                                                                                                                                                                                                                                                                                    media
## 1                                                                                                                                                         http://i.imgur.com/OPDes1m.jpg, http://i.imgur.com/XCDhJ6e.png, http://i.imgur.com/bKejPOh.jpg, http://i.imgur.com/JrRu8b4.jpg, http://i.imgur.com/i5RdGvC.png, http://i.imgur.com/P8LgiYb.png
## 2                                                                                                                                                                             https://megapx-assets.dcard.tw/images/5fa1beb8-7edd-4836-aff4-089f5880be10/1280.jpeg, https://megapx-assets.dcard.tw/images/31d33e04-4926-4dd1-a743-55c9cfe872d7/1280.jpeg
## 3 https://megapx-assets.dcard.tw/images/089887e6-dc3c-405b-8e47-972048748d65/1280.jpeg, https://megapx-assets.dcard.tw/images/bc599ba3-e605-4074-a208-55cbeaf3ded4/1280.jpeg, https://megapx-assets.dcard.tw/images/3699aaae-c7cd-43bf-bb3c-b5c853a405df/full.jpeg, https://megapx-assets.dcard.tw/images/b6386d6f-2e5f-414c-8be8-dfcc3b27d12d/1280.jpeg
## 4                                                                                                                                                                                                                                                                                                                                                   NULL
## 5                                                                                                                                                                                                                                                                                                                                                   NULL
## 6                                                                                                                                                                                                                                                                                                                                                   NULL
##   reportReasonText postAvatar
## 1                            
## 2                            
## 3                            
## 4                            
## 5                            
## 6</code></pre>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1"><span class="co"># View(res)</span></a></code></pre></div>
</div>
<div id="getting-taipei-theft-report-data" class="section level3">
<h3><span class="header-section-number">1.2.2</span> Getting Taipei theft report data</h3>
<p><strong>Getting from the web directly</strong></p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1">url &lt;-<span class="st"> &quot;http://data.taipei/opendata/datalist/datasetMeta/download?id=68785231-d6c5-47a1-b001-77eec70bec02&amp;rid=34a4a431-f04d-474a-8e72-8d3f586db3df&quot;</span></a>
<a class="sourceLine" id="cb12-2" data-line-number="2">df &lt;-<span class="st"> </span><span class="kw">read.csv</span>(url, <span class="dt">fileEncoding =</span> <span class="st">&quot;big5&quot;</span>)</a>
<a class="sourceLine" id="cb12-3" data-line-number="3"><span class="kw">head</span>(df)</a></code></pre></div>
<pre><code>##   編號     案類 發生.現.日期 發生時段
## 1    1 住宅竊盜      1040101    00~02
## 2    2 住宅竊盜      1040101    00~02
## 3    3 住宅竊盜      1040101    06~08
## 4    4 住宅竊盜      1040101    10~12
## 5    5 住宅竊盜      1040101    12~14
## 6    6 住宅竊盜      1040102    00~02
##                                  發生.現.地點
## 1              台北市文山區萬美里萬寧街1~30號
## 2 台北市信義區富台里忠孝東路5段295巷6弄1~30號
## 3             台北市中山區新生北路1段91~120號
## 4           台北市文山區明興里興隆路4段1~30號
## 5               台北縣新莊市思源路332巷1~30號
## 6   台北市士林區天福里1鄰忠誠路2段130巷1~30號</code></pre>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1">dplyr<span class="op">::</span><span class="kw">glimpse</span>(df)</a></code></pre></div>
<pre><code>## Observations: 3,053
## Variables: 5
## $ 編號         &lt;int&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17,…
## $ 案類         &lt;fct&gt; 住宅竊盜, 住宅竊盜, 住宅竊盜, 住宅竊盜, 住宅竊盜, 住宅竊盜, 住宅竊盜, 住宅竊盜, 住宅竊盜, 住宅竊盜…
## $ 發生.現.日期 &lt;int&gt; 1040101, 1040101, 1040101, 1040101, 1040101, 1040102, 1040102…
## $ 發生時段     &lt;fct&gt; 00~02, 00~02, 06~08, 10~12, 12~14, 00~02, 06~08, 06~08, 10~1…
## $ 發生.現.地點 &lt;fct&gt; 台北市文山區萬美里萬寧街1~30號, 台北市信義區富台里忠孝東路5段295巷6弄1~30號, 台北市中山區新生北路1段91…</code></pre>
<p><strong>Loading a csv file in data directory</strong></p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" data-line-number="1"><span class="co"># if mac cannot read data</span></a>
<a class="sourceLine" id="cb16-2" data-line-number="2"><span class="kw">GET</span>(url, <span class="kw">write_disk</span>(<span class="st">&quot;data/tptheft.csv&quot;</span>, <span class="dt">overwrite =</span> <span class="ot">TRUE</span>))</a></code></pre></div>
<pre><code>## Response [https://data.taipei/opendata/datalist/datasetMeta/download?id=68785231-d6c5-47a1-b001-77eec70bec02&amp;rid=34a4a431-f04d-474a-8e72-8d3f586db3df]
##   Date: 2020-02-13 17:26
##   Status: 200
##   Content-Type: text/html; charset=UTF-8
##   Size: 194 kB
## &lt;ON DISK&gt;  /Users/jirlong/Dropbox/Programming/R/PDR/data/tptheft.csv</code></pre>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" data-line-number="1">df &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;data/tptheft.csv&quot;</span>, <span class="dt">fileEncoding =</span> <span class="st">&quot;big5&quot;</span>)</a>
<a class="sourceLine" id="cb18-2" data-line-number="2"><span class="kw">head</span>(df)</a></code></pre></div>
<pre><code>##   編號     案類 發生.現.日期 發生時段
## 1    1 住宅竊盜      1040101    00~02
## 2    2 住宅竊盜      1040101    00~02
## 3    3 住宅竊盜      1040101    06~08
## 4    4 住宅竊盜      1040101    10~12
## 5    5 住宅竊盜      1040101    12~14
## 6    6 住宅竊盜      1040102    00~02
##                                  發生.現.地點
## 1              台北市文山區萬美里萬寧街1~30號
## 2 台北市信義區富台里忠孝東路5段295巷6弄1~30號
## 3             台北市中山區新生北路1段91~120號
## 4           台北市文山區明興里興隆路4段1~30號
## 5               台北縣新莊市思源路332巷1~30號
## 6   台北市士林區天福里1鄰忠誠路2段130巷1~30號</code></pre>
</div>
<div id="loading-moi-data-through-api" class="section level3">
<h3><span class="header-section-number">1.2.3</span> Loading MOI data through API</h3>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" data-line-number="1">url &lt;-<span class="st"> &quot;https://www.ris.gov.tw/rs-opendata/api/v1/datastore/ODRP024/107?page=1&quot;</span></a>
<a class="sourceLine" id="cb20-2" data-line-number="2">first_page &lt;-<span class="st"> </span><span class="kw">fromJSON</span>(<span class="kw">content</span>(<span class="kw">GET</span>(url), <span class="st">&quot;text&quot;</span>))</a>
<a class="sourceLine" id="cb20-3" data-line-number="3"><span class="kw">head</span>(first_page<span class="op">$</span>responseData)</a></code></pre></div>
<pre><code>##   statistic_yyy district_code      site_id village    edu sex
## 1           107   65000010001 新北市板橋區  留侯里   博畢  男
## 2           107   65000010001 新北市板橋區  留侯里   碩畢  男
## 3           107   65000010001 新北市板橋區  留侯里   大畢  男
## 4           107   65000010001 新北市板橋區  留侯里   專畢  男
## 5           107   65000010001 新北市板橋區  留侯里 高中畢  男
## 6           107   65000010001 新北市板橋區  留侯里 國中畢  男
##   headhousehold_count
## 1                   3
## 2                  26
## 3                  71
## 4                  52
## 5                 122
## 6                  40</code></pre>
</div>
<div id="getting-104-query-data" class="section level3">
<h3><span class="header-section-number">1.2.4</span> Getting 104 query data</h3>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb22-1" data-line-number="1">url &lt;-<span class="st"> &quot;https://www.104.com.tw/jobs/search/list?ro=0&amp;kwop=7&amp;keyword=%E7%88%AC%E8%9F%B2&amp;order=1&amp;asc=0&amp;page=3&amp;mode=s&amp;jobsource=2018indexpoc&quot;</span></a>
<a class="sourceLine" id="cb22-2" data-line-number="2"></a>
<a class="sourceLine" id="cb22-3" data-line-number="3">res &lt;-<span class="st"> </span><span class="kw">fromJSON</span>(<span class="kw">content</span>(<span class="kw">GET</span>(url), <span class="st">&quot;text&quot;</span>))</a>
<a class="sourceLine" id="cb22-4" data-line-number="4">df &lt;-<span class="st"> </span>res<span class="op">$</span>data<span class="op">$</span>list</a>
<a class="sourceLine" id="cb22-5" data-line-number="5"><span class="kw">head</span>(df)</a></code></pre></div>
<pre><code>##   jobType    jobNo                               jobName
## 1       0 11397872 【軟體/網路/APP工程師】柬埔寨金邊職缺
## 2       0  9161490                      Python程式設計師
## 3       0  8876423                  C# / .Net 軟體工程師
## 4       2 10964862                  07_資料分析師 (中和)
## 5       0  7468390                          IT系統工程師
## 6       0  9267466                      資料分析工程主管
##                          jobNameSnippet jobRole jobRo jobAddrNoDesc
## 1 【軟體/網路/APP工程師】柬埔寨金邊職缺       1     1        柬埔寨
## 2                      Python程式設計師       1     1  台中市南屯區
## 3                  C# / .Net 軟體工程師       1     1  台北市內湖區
## 4                  07_資料分析師 (中和)       1     1  新北市中和區
## 5                          IT系統工程師       1     1  台南市仁德區
## 6                      資料分析工程主管       1     1  台北市內湖區
##                        jobAddress
## 1                                
## 2 文心路一段521號7樓之1(鉅眾大樓)
## 3           堤頂大道二段179號10樓
## 4                                
## 5                     新田二街1號
## 6           內湖路一段360巷8號7樓
##                                                                                                                                                                                                                                                                                 description
## 1                                                       \r\nGolang開發工程師\r\nH5工程師\r\nCocos開發工程師\r\n廣告演算法工程師\r\n伺服器程式(高級/中級)\r\n用戶端程式(高級/中級)\r\n[[[爬蟲]]]開發工程師\r\n運維工程師(基礎)\r\n運維工程師(業務/中級)\r\n運維工程師(開發/高級)\r\n\r\n\r\n
## 2                                                                                     職責要求： \r\n1. [[[爬蟲]]]及程式維護。\r\n2. Python程式開發及維護。\r\n3. 系統技術研究與專案推動上線。\r\n4. 需輪值班。   \r\n\r\n任職資格： \r\n1. 熟悉 Flask/tornado等 Python API中的一個或多個。
## 3                                                                          本團隊以C#及Vue.js 等技術進行開發[[[爬蟲]]]程式，\r\n工作項目，重點如下，其他細節，歡迎各位朋友來談談：\r\n1. 使用HangFire為基礎來開發及維護[[[爬蟲]]]程式。\r\n2. 網站開發：\r\n(1)  Server 端,使用Asp.net Core
## 4 1.消費者行為資料探勘、資料前處理及建立預測模型，提出分析報告並以簡單精要的方式呈現相關發現及後續做法，創造管理層的數據化決策價值。\n2.跨部門團隊合作大數據資料分析專案，針對發現之問題點提出建議改善，並有效率地掌控專案走向。\n3.熟悉Python或使用R語言做資料分析。\n4.其他主管交辦事項。
## 5                                                                                                                      開發新一代ERP系統\r\n1.後台商業邏輯Web API設計與實作(ASP.NET Core)\r\n2.前台網頁製作 (Angular)\r\n上述兩點依照個人能力可以只負責單一項目，可同時負責前後台者尤佳\r\n
## 6                                                            我們是來自網路圈與IC設計公司的新創公司\r\n透過 Ruby on Rails 開發新一代 E-commerce 系統與物聯智慧服務\r\n\r\n主要的工作內容為：\r\n1. 管理及規劃工作排程\r\n2. 整合目前的功能及發想新的服務\r\n3. 查詢/統計/分析，所獲取的資料
##   optionEdu period periodDesc applyCnt   applyDesc          custNo
## 1      專科     03    2年以上    00001   0~5人應徵 130000000139287
## 2      專科     00   經歷不拘    00011 11~30人應徵 130000000079214
## 3      專科     02    1年以上    00007  6~10人應徵 130000000085985
## 4      大學     03    2年以上    00021 11~30人應徵     70769567000
## 5      大學     00   經歷不拘    00003   0~5人應徵     22798584000
## 6      大學     04    3年以上    00002   0~5人應徵 130000000046441
##                         custName coIndustry       coIndustryDesc salaryLow
## 1 Morning Air Technology PTE.LTD 1001001006 其它軟體及網路相關業   0000000
## 2               雋上科技有限公司 1001001002       電腦軟體服務業   0030000
## 3           辰城科技股份有限公司 1001001003       網際網路相關業   0000000
## 4       台灣之星電信股份有限公司 1001002001           電信相關業   0000000
## 5           恒耀工業股份有限公司 1002011010   其他金屬相關製造業   0000000
## 6           順立智慧股份有限公司 1001001006 其它軟體及網路相關業   0000000
##   salaryHigh          salaryDesc s10 appearDate appearDateDesc optionZone
## 1    0000000            待遇面議  10   20200113           1/13       8192
## 2    0060000 月薪30,000~60,000元  50   20200120           1/20          0
## 3    0000000            待遇面議  10   20200207           2/07          0
## 4    0000000            待遇面議  10   20200205           2/05    6295680
## 5    0000000            待遇面議  10   20200213           2/13     262144
## 6    0000000            待遇面議  10   20200205           2/05          0
##   isApply applyDate isSave
## 1       0                0
## 2       0                0
## 3       0                0
## 4       0                0
## 5       0                0
## 6       0                0
##                                                                                                                                                                                                                                                                                 descSnippet
## 1                           \r\nGolang開發工程師\r\nH5工程師\r\nCocos開發工程師\r\n廣告演算法工程師\r\n伺服器程式(高級/中級)\r\n用戶端程式(高級/中級)\r\n&lt;em class=&#39;b-txt--highlight&#39;&gt;爬蟲&lt;/em&gt;開發工程師\r\n運維工程師(基礎)\r\n運維工程師(業務/中級)\r\n運維工程師(開發/高級)\r\n\r\n\r\n
## 2                                                         職責要求： \r\n1. &lt;em class=&#39;b-txt--highlight&#39;&gt;爬蟲&lt;/em&gt;及程式維護。\r\n2. Python程式開發及維護。\r\n3. 系統技術研究與專案推動上線。\r\n4. 需輪值班。   \r\n\r\n任職資格： \r\n1. 熟悉 Flask/tornado等 Python API中的一個或多個。
## 3                  本團隊以C#及Vue.js 等技術進行開發&lt;em class=&#39;b-txt--highlight&#39;&gt;爬蟲&lt;/em&gt;程式，\r\n工作項目，重點如下，其他細節，歡迎各位朋友來談談：\r\n1. 使用HangFire為基礎來開發及維護&lt;em class=&#39;b-txt--highlight&#39;&gt;爬蟲&lt;/em&gt;程式。\r\n2. 網站開發：\r\n(1)  Server 端,使用Asp.net Core
## 4 1.消費者行為資料探勘、資料前處理及建立預測模型，提出分析報告並以簡單精要的方式呈現相關發現及後續做法，創造管理層的數據化決策價值。\n2.跨部門團隊合作大數據資料分析專案，針對發現之問題點提出建議改善，並有效率地掌控專案走向。\n3.熟悉Python或使用R語言做資料分析。\n4.其他主管交辦事項。
## 5                                                                                                                      開發新一代ERP系統\r\n1.後台商業邏輯Web API設計與實作(ASP.NET Core)\r\n2.前台網頁製作 (Angular)\r\n上述兩點依照個人能力可以只負責單一項目，可同時負責前後台者尤佳\r\n
## 6                                                            我們是來自網路圈與IC設計公司的新創公司\r\n透過 Ruby on Rails 開發新一代 E-commerce 系統與物聯智慧服務\r\n\r\n主要的工作內容為：\r\n1. 管理及規劃工作排程\r\n2. 整合目前的功能及發想新的服務\r\n3. 查詢/統計/分析，所獲取的資料
##         tags
## 1  員工600人
## 2           
## 3  員工135人
## 4           
## 5 員工1000人
## 6   員工70人
##                                                                                                                                               link.applyAnalyze
## 1 //www.104.com.tw/jobs/apply/analysis?j=6a784a744074512b5e60422940463e67540424a733c3e466f444a42252525252314e42607503j97&amp;channel=104rpt&amp;jobsource=apply_analyze
## 2 //www.104.com.tw/jobs/apply/analysis?j=3c60436c5e6c492034583a214e2e365f2383a426b34363e673c423a1d1d1d1d186464a363189j99&amp;channel=104rpt&amp;jobsource=apply_analyze
## 3 //www.104.com.tw/jobs/apply/analysis?j=57774a2f617350285d49432459353d6643f4149723b3d456e434941242424241f24b67493816j55&amp;channel=104rpt&amp;jobsource=apply_analyze
## 4         //www.104.com.tw/jobs/apply/analysis?j=50684b313c4e465e393a426b565c3f2196a684b2f3c74472929292928415c3a2d008j48&amp;channel=104rpt&amp;jobsource=apply_analyze
## 5         //www.104.com.tw/jobs/apply/analysis?j=443a4426446c3f5631323a633c2e381975e4a44273c5c3e2121212121382b2625381j52&amp;channel=104rpt&amp;jobsource=apply_analyze
## 6 //www.104.com.tw/jobs/apply/analysis?j=5e64477162704d6c44363f2240323a6313c3e466f383a426b40463e212121211c94964523543j01&amp;channel=104rpt&amp;jobsource=apply_analyze
##                                            link.job
## 1 //www.104.com.tw/job/6sank?jobsource=2018indexpoc
## 2 //www.104.com.tw/job/5gd1u?jobsource=2018indexpoc
## 3 //www.104.com.tw/job/5a93b?jobsource=2018indexpoc
## 4 //www.104.com.tw/job/6j0ji?jobsource=2018indexpoc
## 5 //www.104.com.tw/job/4g2na?jobsource=2018indexpoc
## 6 //www.104.com.tw/job/5imtm?jobsource=2018indexpoc
##                                                    link.cust    jobsource
## 1 //www.104.com.tw/company/1a2x6bkys7?jobsource=2018indexpoc 2018indexpoc
## 2 //www.104.com.tw/company/1a2x6bjofi?jobsource=2018indexpoc 2018indexpoc
## 3 //www.104.com.tw/company/1a2x6bjtnl?jobsource=2018indexpoc 2018indexpoc
## 4    //www.104.com.tw/company/wiedfdk?jobsource=2018indexpoc 2018indexpoc
## 5    //www.104.com.tw/company/ah1os00?jobsource=2018indexpoc 2018indexpoc
## 6 //www.104.com.tw/company/1a2x6biz55?jobsource=2018indexpoc 2018indexpoc
##                              jobNameRaw                    custNameRaw
## 1 【軟體/網路/APP工程師】柬埔寨金邊職缺 Morning Air Technology PTE.LTD
## 2                      Python程式設計師               雋上科技有限公司
## 3                  C# / .Net 軟體工程師           辰城科技股份有限公司
## 4                  07_資料分析師 (中和)       台灣之星電信股份有限公司
## 5                          IT系統工程師           恒耀工業股份有限公司
## 6                      資料分析工程主管           順立智慧股份有限公司</code></pre>
</div>
<div id="getting-ubike-data" class="section level3">
<h3><span class="header-section-number">1.2.5</span> Getting ubike data</h3>
<ul>
<li><a href="https://taipeicity.github.io/traffic_realtime/" class="uri">https://taipeicity.github.io/traffic_realtime/</a></li>
</ul>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb24-1" data-line-number="1">url &lt;-<span class="st"> &quot;https://tcgbusfs.blob.core.windows.net/blobyoubike/YouBikeTP.json&quot;</span></a>
<a class="sourceLine" id="cb24-2" data-line-number="2">ubike.list &lt;-<span class="st"> </span><span class="kw">fromJSON</span>(<span class="kw">content</span>(<span class="kw">GET</span>(url),<span class="st">&quot;text&quot;</span>, <span class="dt">encoding =</span> <span class="st">&quot;utf-8&quot;</span>))</a>
<a class="sourceLine" id="cb24-3" data-line-number="3">ubike.v &lt;-<span class="st"> </span><span class="kw">unlist</span>(ubike.list<span class="op">$</span>retVal)</a>
<a class="sourceLine" id="cb24-4" data-line-number="4">ubike.m &lt;-<span class="st"> </span><span class="kw">matrix</span>(ubike.v, <span class="dt">byrow =</span> T, <span class="dt">ncol =</span> <span class="dv">14</span>)</a>
<a class="sourceLine" id="cb24-5" data-line-number="5">ubike.df &lt;-<span class="st"> </span><span class="kw">as.data.frame</span>(ubike.m)</a>
<a class="sourceLine" id="cb24-6" data-line-number="6"><span class="kw">names</span>(ubike.df) &lt;-<span class="st"> </span><span class="kw">names</span>(ubike.list<span class="op">$</span>retVal<span class="op">$</span><span class="st">`</span><span class="dt">0001</span><span class="st">`</span>)</a>
<a class="sourceLine" id="cb24-7" data-line-number="7"><span class="kw">head</span>(ubike.df)</a></code></pre></div>
<pre><code>##    sno                       sna tot sbi  sarea           mday           lat
## 1 0001     捷運市政府站(3號出口) 180  19 信義區 20200214012433 25.0408578889
## 2 0002 捷運國父紀念館站(2號出口)  48  32 大安區 20200214012420     25.041254
## 3 0003                台北市政府  40  21 信義區 20200214012430 25.0377972222
## 4 0004                  市民廣場  60  38 信義區 20200214012438 25.0360361111
## 5 0005                  興雅國中  60  21 信義區 20200214012415 25.0365638889
## 6 0006              臺北南山廣場  80  23 信義區 20200214012436     25.034047
##             lng                                                             ar
## 1 121.567904444                                        忠孝東路/松仁路(東南側)
## 2     121.55742                                忠孝東路四段/光復南路口(西南側)
## 3 121.565169444               台北市政府東門(松智路) (鄰近信義商圈/台北探索館)
## 4    121.562325 市府路/松壽路(西北側)(鄰近台北101/台北世界貿易中心/台北探索館)
## 5   121.5686639       松仁路/松仁路95巷(東南側)(鄰近信義商圈/台北信義威秀影城)
## 6    121.565973  松智路/松廉路(東北側) (鄰近台北101/信義商圈/台北信義威秀影城)
##       sareaen                                     snaen
## 1 Xinyi Dist.   MRT Taipei City Hall Stataion(Exit 3)-2
## 2  Daan Dist. MRT S.Y.S Memorial Hall Stataion(Exit 2.)
## 3 Xinyi Dist.                          Taipei City Hall
## 4 Xinyi Dist.                            Citizen Square
## 5 Xinyi Dist.                    Xingya Jr. High School
## 6 Xinyi Dist.                            NAN SHAN PLAZA
##                                                          aren bemp act
## 1 The S.W. side of Road Zhongxiao East Road &amp; Road Chung Yan.  157   1
## 2                         Sec,4. Zhongxiao E.Rd/GuangFu S. Rd   16   1
## 3             Taipei City Government Eastgate (Song Zhi Road)   19   1
## 4               The N.W. side of Road Shifu &amp; Road Song Shou.   20   1
## 5        The S.E. side of Road Songren &amp; Ln. 95, Songren Rd..   39   1
## 6            The N.E. side of Road Song Zhi &amp; Road Song Lian.   56   1</code></pre>

</div>
</div>
<div id="r的基本語法" class="section level2">
<h2><span class="header-section-number">1.3</span> R的基本語法</h2>
<div id="assignment" class="section level3">
<h3><span class="header-section-number">1.3.1</span> Assignment</h3>
<p>符號<code>&lt;-</code> 將右邊的算式或數值指派給左邊的變數。右邊如果是numeric，那左邊的變數就是numeric variable；右邊如果是character，左邊的變數就是character variable。R的<code>&lt;-</code>符號和一般程式語言的<code>=</code>意義是一樣的，甚至R也可以用<code>=</code>來作Assignment。在幾乎所有程式語言中，單等號<code>=</code>指的是Assignment，把右方的算式、值或物件指給左方的變數。而比較兩者相不相等，則用雙等號<code>==</code>，例如<code>1==3-2</code>。</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb26-1" data-line-number="1">a &lt;-<span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb26-2" data-line-number="2">b &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>)</a>
<a class="sourceLine" id="cb26-3" data-line-number="3">c &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;1&quot;</span>, <span class="st">&quot;2&quot;</span>, <span class="st">&quot;3&quot;</span>, <span class="st">&quot;4&quot;</span>)</a>
<a class="sourceLine" id="cb26-4" data-line-number="4">d &lt;-<span class="st"> </span><span class="kw">c</span>(b, a)</a>
<a class="sourceLine" id="cb26-5" data-line-number="5">e &lt;-<span class="st"> &quot;abcd&quot;</span></a></code></pre></div>
</div>
<div id="註解-comment" class="section level3">
<h3><span class="header-section-number">1.3.2</span> 註解 (Comment)</h3>
<ul>
<li><strong>註解</strong>：在程式碼區塊若前面有<code>#</code>字號後面跟著空白的話，那代表那行被標示為註解，程式執行時會自動跳過註解不執行。</li>
<li><strong>快速鍵</strong>：當游標在某一行程式碼時打<code>cmd(ctrl)-shift-c</code>，就可以產生註解。</li>
</ul>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb27-1" data-line-number="1"><span class="co"># df &lt;- data.frame(a = c(1, 2, 3), b = c(3, 4, 5))</span></a></code></pre></div>
</div>
</div>
<div id="vector" class="section level2">
<h2><span class="header-section-number">1.4</span> Vector</h2>
<p>在這邊我們使用<a href="https://www.ptt.cc/bbs/Gossiping/M.1535459575.A.54D.html">各縣市平均每月薪資所得</a>以及<a href="https://zh.wikipedia.org/wiki/%E8%87%BA%E7%81%A3%E8%A1%8C%E6%94%BF%E5%8D%80%E4%BA%BA%E5%8F%A3%E5%88%97%E8%A1%A8">各縣市人口數</a>兩筆範例資料來做練習。</p>
<div id="建立vector" class="section level3">
<h3><span class="header-section-number">1.4.1</span> 建立Vector</h3>
<p>在程式碼中，只要是文字必用成對的雙引號或單引號包含其中，以區隔「變數」和「數字」。例如如果看到沒有雙引號的「英文字母」必定是變數名稱，或函式名稱。如果看到有雙引號的數字，那也是文字。</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb28-1" data-line-number="1">income &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">70100</span>, <span class="dv">51300</span>, <span class="dv">51100</span>, <span class="dv">48400</span>, <span class="dv">47600</span>, <span class="dv">43000</span>)</a>
<a class="sourceLine" id="cb28-2" data-line-number="2">county &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;台北&quot;</span>, <span class="st">&quot;新北&quot;</span>, <span class="st">&quot;桃園&quot;</span>, <span class="st">&quot;高雄&quot;</span>, <span class="st">&quot;台中&quot;</span>, <span class="st">&quot;台南&quot;</span>)</a>
<a class="sourceLine" id="cb28-3" data-line-number="3">population &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="fl">2.6</span>, <span class="fl">3.9</span>, <span class="fl">2.2</span>, <span class="fl">2.7</span>, <span class="fl">2.8</span>, <span class="fl">1.8</span>)</a>
<a class="sourceLine" id="cb28-4" data-line-number="4">area &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="fl">271.8</span>, <span class="fl">2052.5</span>, <span class="dv">1221</span>, <span class="fl">2951.9</span>, <span class="fl">2214.9</span>, <span class="fl">2191.7</span>)</a></code></pre></div>
<p><strong>Creating by seq() function</strong></p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb29-1" data-line-number="1">a &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="dv">11</span>, <span class="dv">99</span>, <span class="dv">11</span>)</a>
<a class="sourceLine" id="cb29-2" data-line-number="2">a</a></code></pre></div>
<pre><code>## [1] 11 22 33 44 55 66 77 88 99</code></pre>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb31-1" data-line-number="1">b &lt;-<span class="st"> </span><span class="dv">11</span><span class="op">:</span><span class="dv">20</span></a>
<a class="sourceLine" id="cb31-2" data-line-number="2">b</a></code></pre></div>
<pre><code>##  [1] 11 12 13 14 15 16 17 18 19 20</code></pre>
<p><strong>Creating sequences by distribution</strong></p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb33-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="kw">runif</span>(<span class="dv">1000</span>, <span class="dv">1</span>, <span class="dv">10</span>) <span class="co"># uniform dist, n=1000</span></a>
<a class="sourceLine" id="cb33-2" data-line-number="2"><span class="kw">plot</span>(<span class="kw">density</span>(x))</a></code></pre></div>
<p><img src="PDR_files/figure-html/unnamed-chunk-15-1.png" width="672" /></p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb34-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="kw">rnorm</span>(<span class="dv">1000</span>, <span class="dv">1</span>, <span class="dv">10</span>) <span class="co"># uniform dist, n=1000</span></a>
<a class="sourceLine" id="cb34-2" data-line-number="2"><span class="kw">plot</span>(<span class="kw">density</span>(x))</a></code></pre></div>
<p><img src="PDR_files/figure-html/unnamed-chunk-15-2.png" width="672" /></p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb35-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="kw">rnorm</span>(<span class="dv">10000000</span>, <span class="dv">1</span>, <span class="dv">10</span>) <span class="co"># normal dist, n=1000</span></a>
<a class="sourceLine" id="cb35-2" data-line-number="2"><span class="kw">plot</span>(<span class="kw">density</span>(x))</a></code></pre></div>
<p><img src="PDR_files/figure-html/unnamed-chunk-15-3.png" width="672" /></p>
</div>
<div id="查看vector的內容" class="section level3">
<h3><span class="header-section-number">1.4.2</span> 查看Vector的內容</h3>
<p>預覽、印出Vector的內容。在R裡面不用特別用<code>print()</code>來印出一個變數的內容。他像是matlab一樣，只要直接打出該變數的名稱，就代表要把其內容列印出來。</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb36-1" data-line-number="1">county</a></code></pre></div>
<pre><code>## [1] &quot;台北&quot; &quot;新北&quot; &quot;桃園&quot; &quot;高雄&quot; &quot;台中&quot; &quot;台南&quot;</code></pre>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb38-1" data-line-number="1">income</a></code></pre></div>
<pre><code>## [1] 70100 51300 51100 48400 47600 43000</code></pre>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb40-1" data-line-number="1"><span class="kw">head</span>(county)</a></code></pre></div>
<pre><code>## [1] &quot;台北&quot; &quot;新北&quot; &quot;桃園&quot; &quot;高雄&quot; &quot;台中&quot; &quot;台南&quot;</code></pre>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb42-1" data-line-number="1"><span class="kw">tail</span>(county)</a></code></pre></div>
<pre><code>## [1] &quot;台北&quot; &quot;新北&quot; &quot;桃園&quot; &quot;高雄&quot; &quot;台中&quot; &quot;台南&quot;</code></pre>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb44-1" data-line-number="1"><span class="kw">length</span>(county)</a></code></pre></div>
<pre><code>## [1] 6</code></pre>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb46-1" data-line-number="1"><span class="co"># View(county)</span></a></code></pre></div>
</div>
<div id="subsetting-filtering" class="section level3">
<h3><span class="header-section-number">1.4.3</span> Subsetting, filtering</h3>
<p>It is important to know how to neglect first n or last n elements. For example, a[1:(length(a)-2)] will neglect the last two elements. Thinking why I need parentheses for <code>length(a)-2</code> here.</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb47-1" data-line-number="1">county</a></code></pre></div>
<pre><code>## [1] &quot;台北&quot; &quot;新北&quot; &quot;桃園&quot; &quot;高雄&quot; &quot;台中&quot; &quot;台南&quot;</code></pre>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb49-1" data-line-number="1">county[<span class="kw">c</span>(<span class="dv">5</span>, <span class="dv">3</span>, <span class="dv">1</span>)] <span class="co"># how about country[c(1, 3, 5)]</span></a></code></pre></div>
<pre><code>## [1] &quot;台中&quot; &quot;桃園&quot; &quot;台北&quot;</code></pre>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb51-1" data-line-number="1">county[<span class="dv">3</span><span class="op">:</span><span class="dv">6</span>] <span class="co"># is it equal to country[c(3, 4, 5, 6)]</span></a></code></pre></div>
<pre><code>## [1] &quot;桃園&quot; &quot;高雄&quot; &quot;台中&quot; &quot;台南&quot;</code></pre>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb53-1" data-line-number="1">a &lt;-<span class="st"> </span><span class="dv">11</span><span class="op">:</span><span class="dv">19</span></a>
<a class="sourceLine" id="cb53-2" data-line-number="2">a[<span class="dv">3</span><span class="op">:</span><span class="kw">length</span>(a)]</a></code></pre></div>
<pre><code>## [1] 13 14 15 16 17 18 19</code></pre>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb55-1" data-line-number="1">a[<span class="kw">length</span>(a)<span class="op">:</span><span class="dv">3</span>]</a></code></pre></div>
<pre><code>## [1] 19 18 17 16 15 14 13</code></pre>
</div>
<div id="deleting" class="section level3">
<h3><span class="header-section-number">1.4.4</span> Deleting</h3>
<ul>
<li>Without assignment, deletion won’t change original vectors</li>
</ul>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb57-1" data-line-number="1">b &lt;-<span class="st"> </span><span class="dv">11</span><span class="op">:</span><span class="dv">20</span></a>
<a class="sourceLine" id="cb57-2" data-line-number="2">b[<span class="op">-</span>(<span class="dv">3</span><span class="op">:</span><span class="dv">5</span>)]</a></code></pre></div>
<pre><code>## [1] 11 12 16 17 18 19 20</code></pre>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb59-1" data-line-number="1">b[<span class="op">-</span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>)]</a></code></pre></div>
<pre><code>## [1] 12 14 16 17 18 19 20</code></pre>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb61-1" data-line-number="1">b</a></code></pre></div>
<pre><code>##  [1] 11 12 13 14 15 16 17 18 19 20</code></pre>
<ul>
<li>Correct deleting operations with assignment to replace original vector</li>
</ul>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb63-1" data-line-number="1">b &lt;-<span class="st"> </span>b[<span class="op">-</span>(<span class="dv">3</span><span class="op">:</span><span class="dv">5</span>)]</a>
<a class="sourceLine" id="cb63-2" data-line-number="2">b</a></code></pre></div>
<pre><code>## [1] 11 12 16 17 18 19 20</code></pre>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb65-1" data-line-number="1">a &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="dv">11</span>, <span class="dv">99</span>, <span class="dv">11</span>)</a>
<a class="sourceLine" id="cb65-2" data-line-number="2">a &lt;-<span class="st"> </span>a[<span class="op">-</span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>)]</a>
<a class="sourceLine" id="cb65-3" data-line-number="3">a</a></code></pre></div>
<pre><code>## [1] 22 44 66 77 88 99</code></pre>
</div>
<div id="concatinating" class="section level3">
<h3><span class="header-section-number">1.4.5</span> Concatinating</h3>
<ul>
<li>Concatinating is quite useful for web crawling when you crawl article links page by page. You may be not sure the number of page you need to crawl. So you need to append entire new vector to old vector. It is concatinating. (“Appending” often means adding one new element at the end of data.)</li>
</ul>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb67-1" data-line-number="1">a &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">10</span></a>
<a class="sourceLine" id="cb67-2" data-line-number="2">a &lt;-<span class="st"> </span><span class="kw">c</span>(a, <span class="dv">11</span>)</a>
<a class="sourceLine" id="cb67-3" data-line-number="3">a</a></code></pre></div>
<pre><code>##  [1]  1  2  3  4  5  6  7  8  9 10 11</code></pre>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb69-1" data-line-number="1">b</a></code></pre></div>
<pre><code>## [1] 11 12 16 17 18 19 20</code></pre>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb71-1" data-line-number="1">a &lt;-<span class="st"> </span><span class="kw">c</span>(a, b)</a>
<a class="sourceLine" id="cb71-2" data-line-number="2">a</a></code></pre></div>
<pre><code>##  [1]  1  2  3  4  5  6  7  8  9 10 11 11 12 16 17 18 19 20</code></pre>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb73-1" data-line-number="1">a &lt;-<span class="st"> </span><span class="kw">c</span>(a, a, b)</a>
<a class="sourceLine" id="cb73-2" data-line-number="2">a</a></code></pre></div>
<pre><code>##  [1]  1  2  3  4  5  6  7  8  9 10 11 11 12 16 17 18 19 20  1  2  3  4  5  6  7
## [26]  8  9 10 11 11 12 16 17 18 19 20 11 12 16 17 18 19 20</code></pre>
</div>
</div>
<div id="computing-vectors" class="section level2">
<h2><span class="header-section-number">1.5</span> Computing vectors</h2>
<div id="arithmetic-operations" class="section level3">
<h3><span class="header-section-number">1.5.1</span> Arithmetic operations</h3>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb75-1" data-line-number="1">a &lt;-<span class="st"> </span><span class="dv">11</span><span class="op">:</span><span class="dv">19</span></a>
<a class="sourceLine" id="cb75-2" data-line-number="2">a <span class="op">+</span><span class="st"> </span><span class="dv">3</span></a></code></pre></div>
<pre><code>## [1] 14 15 16 17 18 19 20 21 22</code></pre>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb77-1" data-line-number="1">a <span class="op">/</span><span class="st"> </span><span class="dv">2</span></a></code></pre></div>
<pre><code>## [1] 5.5 6.0 6.5 7.0 7.5 8.0 8.5 9.0 9.5</code></pre>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb79-1" data-line-number="1">a <span class="op">%%</span><span class="st"> </span><span class="dv">2</span></a></code></pre></div>
<pre><code>## [1] 1 0 1 0 1 0 1 0 1</code></pre>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb81-1" data-line-number="1">a <span class="op">%/%</span><span class="st"> </span><span class="dv">2</span></a></code></pre></div>
<pre><code>## [1] 5 6 6 7 7 8 8 9 9</code></pre>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb83-1" data-line-number="1">a <span class="op">%%</span><span class="st"> </span><span class="dv">2</span><span class="op">==</span><span class="st"> </span><span class="dv">0</span></a></code></pre></div>
<pre><code>## [1] FALSE  TRUE FALSE  TRUE FALSE  TRUE FALSE  TRUE FALSE</code></pre>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb85-1" data-line-number="1">a <span class="op">%%</span><span class="st"> </span><span class="dv">2</span> <span class="op">!=</span><span class="st"> </span><span class="dv">0</span></a></code></pre></div>
<pre><code>## [1]  TRUE FALSE  TRUE FALSE  TRUE FALSE  TRUE FALSE  TRUE</code></pre>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb87-1" data-line-number="1">a[a<span class="op">%%</span><span class="st"> </span><span class="dv">2</span> <span class="op">==</span><span class="st"> </span><span class="dv">0</span>]</a></code></pre></div>
<pre><code>## [1] 12 14 16 18</code></pre>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb89-1" data-line-number="1">a[a<span class="op">%%</span><span class="dv">2</span> <span class="op">!=</span><span class="st"> </span><span class="dv">0</span>]</a></code></pre></div>
<pre><code>## [1] 11 13 15 17 19</code></pre>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb91-1" data-line-number="1">a &lt;-<span class="st"> </span>a <span class="op">%%</span><span class="st"> </span><span class="dv">2</span>     <span class="co"># modular arithmetic, get the reminder</span></a>
<a class="sourceLine" id="cb91-2" data-line-number="2">a &lt;-<span class="st"> </span>a <span class="op">%/%</span><span class="st"> </span><span class="dv">2</span>    <span class="co"># Quotient</span></a></code></pre></div>
</div>
<div id="logic-comparisons" class="section level3">
<h3><span class="header-section-number">1.5.2</span> Logic comparisons</h3>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb92-1" data-line-number="1">a <span class="op">%%</span><span class="st"> </span><span class="dv">2</span> <span class="op">==</span><span class="st"> </span><span class="dv">0</span>     <span class="co"># deteting odd/even number</span></a></code></pre></div>
<pre><code>## [1] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE</code></pre>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb94-1" data-line-number="1">a <span class="op">%%</span><span class="st"> </span><span class="dv">2</span> <span class="op">!=</span><span class="st"> </span><span class="dv">0</span></a></code></pre></div>
<pre><code>## [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE</code></pre>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb96-1" data-line-number="1">a[a<span class="op">%%</span><span class="dv">2</span><span class="op">==</span><span class="dv">0</span>]</a></code></pre></div>
<pre><code>## [1] 0 0 0 0 0 0 0 0 0</code></pre>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb98-1" data-line-number="1">a <span class="op">&gt;</span><span class="st"> </span>b</a></code></pre></div>
<pre><code>## Warning in a &gt; b: longer object length is not a multiple of shorter object
## length</code></pre>
<pre><code>## [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE</code></pre>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb101-1" data-line-number="1">income <span class="op">&gt;</span><span class="st"> </span><span class="kw">mean</span>(income)</a></code></pre></div>
<pre><code>## [1]  TRUE FALSE FALSE FALSE FALSE FALSE</code></pre>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb103-1" data-line-number="1"><span class="ot">TRUE</span> <span class="op">==</span><span class="st"> </span>T       <span class="co"># == equal to,</span></a></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb105-1" data-line-number="1"><span class="ot">TRUE</span> <span class="op">!=</span><span class="st"> </span>F       <span class="co"># != Not equal to</span></a></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb107-1" data-line-number="1"><span class="kw">any</span>(a<span class="op">&gt;</span><span class="dv">11</span>) <span class="co"># is there any element larger than 1</span></a></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb109-1" data-line-number="1"><span class="kw">all</span>(a<span class="op">&gt;</span><span class="dv">11</span>) <span class="co"># are all elements larger than 1</span></a></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
</div>
<div id="subsetting-by-logic-comparisons" class="section level3">
<h3><span class="header-section-number">1.5.3</span> Subsetting by logic comparisons</h3>
<ul>
<li>two methods to filter data from vectors, by index vector or a logical vector with equal length.</li>
</ul>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb111-1" data-line-number="1">a &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="dv">11</span>, <span class="dv">55</span>, <span class="dv">11</span>)</a>
<a class="sourceLine" id="cb111-2" data-line-number="2">a[<span class="kw">c</span>(T, F, T, F, T)]</a></code></pre></div>
<pre><code>## [1] 11 33 55</code></pre>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb113-1" data-line-number="1">a[a<span class="op">%%</span><span class="dv">2</span><span class="op">==</span><span class="dv">1</span>]</a></code></pre></div>
<pre><code>## [1] 11 33 55</code></pre>
<div class="sourceCode" id="cb115"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb115-1" data-line-number="1">a<span class="op">%%</span><span class="dv">2</span></a></code></pre></div>
<pre><code>## [1] 1 0 1 0 1</code></pre>
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb117-1" data-line-number="1">a<span class="op">%%</span><span class="dv">2</span><span class="op">==</span><span class="dv">1</span></a></code></pre></div>
<pre><code>## [1]  TRUE FALSE  TRUE FALSE  TRUE</code></pre>
<div class="sourceCode" id="cb119"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb119-1" data-line-number="1">a &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;你好&quot;</span>,<span class="st">&quot;你好棒棒&quot;</span>,<span class="st">&quot;你好棒&quot;</span>,<span class="st">&quot;你真的好棒&quot;</span>)</a>
<a class="sourceLine" id="cb119-2" data-line-number="2">a[<span class="kw">nchar</span>(a)<span class="op">&gt;</span><span class="dv">3</span>]</a></code></pre></div>
<pre><code>## [1] &quot;你好棒棒&quot;   &quot;你真的好棒&quot;</code></pre>
<div class="sourceCode" id="cb121"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb121-1" data-line-number="1"><span class="co"># which will return &quot;index-of&quot;</span></a>
<a class="sourceLine" id="cb121-2" data-line-number="2">a &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="dv">11</span>, <span class="dv">55</span>, <span class="dv">11</span>)</a>
<a class="sourceLine" id="cb121-3" data-line-number="3">a[<span class="kw">which</span>(a<span class="op">%%</span><span class="dv">2</span><span class="op">==</span><span class="dv">1</span>)]</a></code></pre></div>
<pre><code>## [1] 11 33 55</code></pre>
<div class="sourceCode" id="cb123"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb123-1" data-line-number="1"><span class="kw">which</span>(a<span class="op">%%</span><span class="dv">2</span><span class="op">==</span><span class="dv">1</span>)</a></code></pre></div>
<pre><code>## [1] 1 3 5</code></pre>
</div>
<div id="sorting-and-ordering" class="section level3">
<h3><span class="header-section-number">1.5.4</span> Sorting and ordering</h3>
<ul>
<li><p><code>sort(x)</code>的結果必須用<code>&lt;-</code>覆蓋原本的<code>x</code>，此時的<code>x</code>才算被排序的結果。</p></li>
<li><p><code>order(x)</code>函式會傳回<code>x</code>數值由小到大的<strong>索引</strong>。這個例子的結果是<code>5, 4, 3, 6, 1, 2</code>，也就是<code>5</code>位置的那個數最小、<code>4</code>那個位置的數次小、接下來<code>3, 6, 1, 2</code>。</p></li>
<li><p><code>x[order(x)]</code>把<code>order(x)</code>結果（也就是<code>c(5, 4, 3, 6, 1, 2)</code>）傳給原本的<code>x</code>便會使得原本的<code>x</code>重新排序。通常<code>order()</code>的用途是，我們可以將兩個等長的variables例如var1和var2，依據var2來重新排序var1，例如var1[order(var2)]。</p></li>
</ul>
<div class="sourceCode" id="cb125"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb125-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">33</span>, <span class="dv">55</span>, <span class="dv">22</span>, <span class="dv">13</span>, <span class="dv">4</span>, <span class="dv">24</span>)</a>
<a class="sourceLine" id="cb125-2" data-line-number="2"><span class="kw">sort</span>(x)</a></code></pre></div>
<pre><code>## [1]  4 13 22 24 33 55</code></pre>
<div class="sourceCode" id="cb127"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb127-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="kw">sort</span>(x) <span class="co"># assign to replace original x</span></a>
<a class="sourceLine" id="cb127-2" data-line-number="2"><span class="kw">order</span>(x) </a></code></pre></div>
<pre><code>## [1] 1 2 3 4 5 6</code></pre>
<div class="sourceCode" id="cb129"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb129-1" data-line-number="1">x[<span class="kw">order</span>(x)]</a></code></pre></div>
<pre><code>## [1]  4 13 22 24 33 55</code></pre>
</div>
<div id="built-in-math-functions" class="section level3">
<h3><span class="header-section-number">1.5.5</span> Built-in math functions</h3>
<div class="sourceCode" id="cb131"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb131-1" data-line-number="1">a &lt;-<span class="st"> </span><span class="dv">11</span><span class="op">:</span><span class="dv">19</span></a>
<a class="sourceLine" id="cb131-2" data-line-number="2"><span class="kw">min</span>(a); <span class="kw">max</span>(a); <span class="kw">mean</span>(a); <span class="kw">median</span>(a); <span class="kw">sd</span>(a)</a></code></pre></div>
<pre><code>## [1] 11</code></pre>
<pre><code>## [1] 19</code></pre>
<pre><code>## [1] 15</code></pre>
<pre><code>## [1] 15</code></pre>
<pre><code>## [1] 2.738613</code></pre>
<div class="sourceCode" id="cb137"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb137-1" data-line-number="1"><span class="kw">log2</span>(a)</a></code></pre></div>
<pre><code>## [1] 3.459432 3.584963 3.700440 3.807355 3.906891 4.000000 4.087463 4.169925
## [9] 4.247928</code></pre>
<div class="sourceCode" id="cb139"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb139-1" data-line-number="1"><span class="kw">log1p</span>(a)</a></code></pre></div>
<pre><code>## [1] 2.484907 2.564949 2.639057 2.708050 2.772589 2.833213 2.890372 2.944439
## [9] 2.995732</code></pre>
<div class="sourceCode" id="cb141"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb141-1" data-line-number="1">?log1p</a></code></pre></div>
</div>
</div>
<div id="data-types" class="section level2">
<h2><span class="header-section-number">1.6</span> Data types</h2>
<div id="checking-data-type" class="section level3">
<h3><span class="header-section-number">1.6.1</span> Checking data type</h3>
<div class="sourceCode" id="cb142"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb142-1" data-line-number="1"><span class="kw">mode</span>(county)                <span class="co"># character</span></a></code></pre></div>
<pre><code>## [1] &quot;character&quot;</code></pre>
<div class="sourceCode" id="cb144"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb144-1" data-line-number="1"><span class="kw">mode</span>(income)                    <span class="co"># numeric</span></a></code></pre></div>
<pre><code>## [1] &quot;numeric&quot;</code></pre>
<div class="sourceCode" id="cb146"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb146-1" data-line-number="1"><span class="kw">mode</span>(income <span class="op">&gt;</span><span class="st"> </span><span class="kw">mean</span>(income)) <span class="co"># logical</span></a></code></pre></div>
<pre><code>## [1] &quot;logical&quot;</code></pre>
<div class="sourceCode" id="cb148"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb148-1" data-line-number="1">testing &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;26.142&quot;</span>, <span class="st">&quot;12.008&quot;</span>, <span class="st">&quot;7.032&quot;</span>, <span class="st">&quot;13.646&quot;</span>, <span class="st">&quot;4.589&quot;</span>)</a>
<a class="sourceLine" id="cb148-2" data-line-number="2"><span class="kw">mode</span>(testing)               <span class="co"># character</span></a></code></pre></div>
<pre><code>## [1] &quot;character&quot;</code></pre>
</div>
<div id="converting-data-type" class="section level3">
<h3><span class="header-section-number">1.6.2</span> Converting data type</h3>
<ul>
<li><p>numeric vector可以用<code>as.character(x)</code>轉成<code>charcter</code>；logical vector可以用<code>as.numeric(x)</code>轉為<code>numeric</code>。概念上可以說是<code>character &gt; numeric &gt; logical</code>。</p></li>
<li><p>如果硬是在logical vector後附加一個numeric element的話，那就會整個vector被轉為numeric vector；相仿地，如果numeric vector後附加一個character element的話那整個vector就會被轉為character vector。</p></li>
<li><p>可以用<code>sum()</code>函式來計算logical vector有幾個<code>TRUE</code>值。例如<code>sum(a%%2==1)</code>就是計算<code>a</code>中有幾個奇數。<code>TRUE</code>可視為<code>1</code>、<code>FALSE</code>可視為<code>0</code>，所以加總起來就是<code>TRUE</code>有幾個。</p></li>
</ul>
<div class="sourceCode" id="cb150"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb150-1" data-line-number="1">income.c &lt;-<span class="st"> </span><span class="kw">as.character</span>(income)</a>
<a class="sourceLine" id="cb150-2" data-line-number="2">population.c &lt;-<span class="st"> </span><span class="kw">as.numeric</span>(population)</a>
<a class="sourceLine" id="cb150-3" data-line-number="3"></a>
<a class="sourceLine" id="cb150-4" data-line-number="4">a &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="dv">11</span>, <span class="dv">99</span>, <span class="dv">11</span>)</a>
<a class="sourceLine" id="cb150-5" data-line-number="5">a &lt;-<span class="st"> </span><span class="kw">c</span>(a, <span class="st">&quot;100&quot;</span>)</a>
<a class="sourceLine" id="cb150-6" data-line-number="6"></a>
<a class="sourceLine" id="cb150-7" data-line-number="7">a &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="dv">11</span>, <span class="dv">99</span>, <span class="dv">11</span>)</a>
<a class="sourceLine" id="cb150-8" data-line-number="8"><span class="kw">sum</span>(a<span class="op">%%</span><span class="dv">2</span><span class="op">==</span><span class="dv">1</span>)</a></code></pre></div>
<pre><code>## [1] 5</code></pre>
</div>
</div>
<div id="character-operations" class="section level2">
<h2><span class="header-section-number">1.7</span> Character operations</h2>
<div id="character-operations-1" class="section level3">
<h3><span class="header-section-number">1.7.1</span> Character operations</h3>
<div class="sourceCode" id="cb152"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb152-1" data-line-number="1">a &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="dv">11</span>, <span class="dv">55</span>, <span class="dv">11</span>)</a>
<a class="sourceLine" id="cb152-2" data-line-number="2"><span class="kw">paste</span>(<span class="st">&quot;A&quot;</span>, a)       <span class="co"># concatenate</span></a></code></pre></div>
<pre><code>## [1] &quot;A 11&quot; &quot;A 22&quot; &quot;A 33&quot; &quot;A 44&quot; &quot;A 55&quot;</code></pre>
<div class="sourceCode" id="cb154"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb154-1" data-line-number="1"><span class="kw">paste0</span>(<span class="st">&quot;A&quot;</span>, a)      <span class="co"># concatenate</span></a></code></pre></div>
<pre><code>## [1] &quot;A11&quot; &quot;A22&quot; &quot;A33&quot; &quot;A44&quot; &quot;A55&quot;</code></pre>

</div>
</div>
<div id="data1-taipei-city-population-data" class="section level2">
<h2><span class="header-section-number">1.8</span> Data1: Taipei city population data</h2>
<div id="copying-data-and-creating-vectors" class="section level3">
<h3><span class="header-section-number">1.8.1</span> Copying data and creating vectors</h3>
<div class="sourceCode" id="cb156"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb156-1" data-line-number="1">population &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">158228</span>, <span class="dv">126687</span>, <span class="dv">228075</span>, <span class="dv">204903</span>, <span class="dv">308383</span>, <span class="dv">187920</span>)</a>
<a class="sourceLine" id="cb156-2" data-line-number="2">town &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;中正&quot;</span>, <span class="st">&quot;大同&quot;</span>, <span class="st">&quot;中山&quot;</span>, <span class="st">&quot;松山&quot;</span>, <span class="st">&quot;大安&quot;</span>, <span class="st">&quot;萬華&quot;</span>)</a>
<a class="sourceLine" id="cb156-3" data-line-number="3">area &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="fl">7.6071</span>, <span class="fl">5.6815</span>, <span class="fl">13.6821</span>, <span class="fl">9.2878</span>, <span class="fl">11.3614</span>, <span class="fl">8.8522</span>)</a></code></pre></div>
</div>
<div id="building-a-data.frame" class="section level3">
<h3><span class="header-section-number">1.8.2</span> Building a data.frame</h3>
<div class="sourceCode" id="cb157"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb157-1" data-line-number="1">df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(town, population, area)</a>
<a class="sourceLine" id="cb157-2" data-line-number="2">df</a></code></pre></div>
<pre><code>##   town population    area
## 1 中正     158228  7.6071
## 2 大同     126687  5.6815
## 3 中山     228075 13.6821
## 4 松山     204903  9.2878
## 5 大安     308383 11.3614
## 6 萬華     187920  8.8522</code></pre>
<div class="sourceCode" id="cb159"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb159-1" data-line-number="1"><span class="co"># View(df)</span></a></code></pre></div>
</div>
</div>
<div id="data2-importexport-data-of-taiwan" class="section level2">
<h2><span class="header-section-number">1.9</span> Data2: Import/Export data of Taiwan</h2>
<ul>
<li><a href="https://cus93.trade.gov.tw/FSC3040F/FSC3040F">台灣出口進口貿易資料查詢</a></li>
</ul>
<div id="combining-3-vectors-to-a-data.frame" class="section level3">
<h3><span class="header-section-number">1.9.1</span> Combining 3 vectors to a data.frame</h3>
<div class="sourceCode" id="cb160"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb160-1" data-line-number="1">country &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;CN&quot;</span>, <span class="st">&quot;US&quot;</span>, <span class="st">&quot;JP&quot;</span>, <span class="st">&quot;HK&quot;</span>, <span class="st">&quot;KR&quot;</span>, <span class="st">&quot;SG&quot;</span>, <span class="st">&quot;DE&quot;</span>, <span class="st">&quot;MY&quot;</span>, <span class="st">&quot;VN&quot;</span>, <span class="st">&quot;PH&quot;</span>, <span class="st">&quot;TH&quot;</span>, <span class="st">&quot;AU&quot;</span>, <span class="st">&quot;NL&quot;</span>, <span class="st">&quot;SA&quot;</span>, <span class="st">&quot;ID&quot;</span>, <span class="st">&quot;GB&quot;</span>, <span class="st">&quot;IN&quot;</span>, <span class="st">&quot;FR&quot;</span>, <span class="st">&quot;IT&quot;</span>, <span class="st">&quot;AE&quot;</span>)</a>
<a class="sourceLine" id="cb160-2" data-line-number="2"></a>
<a class="sourceLine" id="cb160-3" data-line-number="3">import &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="fl">26.142</span>, <span class="fl">12.008</span>, <span class="fl">7.032</span>, <span class="fl">13.646</span>, <span class="fl">4.589</span>, <span class="fl">5.768</span>, <span class="fl">2.131</span>, <span class="fl">2.802</span>, <span class="fl">3.428</span>, <span class="fl">3.019</span>, <span class="fl">1.976</span>, <span class="fl">1.118</span>, <span class="fl">1.624</span>, <span class="fl">0.449</span>, <span class="fl">0.983</span>, <span class="fl">1.302</span>, <span class="fl">1.027</span>, <span class="fl">0.553</span>, <span class="fl">0.670</span>, <span class="fl">0.455</span>)</a>
<a class="sourceLine" id="cb160-4" data-line-number="4"></a>
<a class="sourceLine" id="cb160-5" data-line-number="5">export &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="fl">22.987</span>, <span class="fl">12.204</span>, <span class="fl">11.837</span>, <span class="fl">7.739</span>, <span class="fl">5.381</span>, <span class="fl">4.610</span>, <span class="fl">2.866</span>, <span class="fl">2.784</span>, <span class="fl">2.414</span>, <span class="fl">2.092</span>, <span class="fl">1.839</span>, <span class="fl">1.788</span>, <span class="fl">1.665</span>, <span class="fl">1.409</span>, <span class="fl">1.391</span>, <span class="fl">1.075</span>, <span class="fl">0.974</span>, <span class="fl">0.899</span>, <span class="fl">0.800</span>, <span class="fl">0.728</span>)</a></code></pre></div>
<ul>
<li><p>合併vector為data.frame</p></li>
<li><p>這時候我們若以<code>str(df)</code>觀察該<code>df</code>的結構會發現，文字型態的資料被轉為<code>Factors</code>，這是我們所不樂見的。過去統計通常會把文字型態當成類別變數，於是用<code>Factors</code>作為資料型態，但資料科學中經常要處理大量的文字資料，此時，我們可以把<code>read.csv</code>的一個參數<code>stringsAsFactors</code>設為<code>FALSE</code>，意味著預設不要將文字的資料轉為Factor而是直接以文字變項來處理。* <code>stringsAsFactors = FALSE</code>也是<code>read.csv()</code>的參數（parameter、argument）。因為一般讀檔會預設把文字讀為類別變項也就是Factor，但資料分析經常要處理文字資料而不是類別變項，所以會希望預設不要把文字讀取為類別變項，因此要設定<code>stringsAsFactors = FALSE</code>。</p></li>
<li><p>為了避免每次都要打這串參數，可以把它設定為全域參數，可以在程式一開始時便加上<code>options(stringsAsFactors = FASLE)</code>，意味著底下所有的函式如果有<code>stringsAsFactors</code>這個參數，一律自動設為<code>FALSE</code>。</p></li>
</ul>
<div class="sourceCode" id="cb161"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb161-1" data-line-number="1">df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(country, import, export)</a>
<a class="sourceLine" id="cb161-2" data-line-number="2"><span class="kw">str</span>(df)</a></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    20 obs. of  3 variables:
##  $ country: Factor w/ 20 levels &quot;AE&quot;,&quot;AU&quot;,&quot;CN&quot;,..: 3 19 11 7 12 17 4 13 20 15 ...
##  $ import : num  26.14 12.01 7.03 13.65 4.59 ...
##  $ export : num  22.99 12.2 11.84 7.74 5.38 ...</code></pre>
<div class="sourceCode" id="cb163"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb163-1" data-line-number="1">df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(country, import, export, <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb163-2" data-line-number="2"><span class="kw">str</span>(df)</a></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    20 obs. of  3 variables:
##  $ country: chr  &quot;CN&quot; &quot;US&quot; &quot;JP&quot; &quot;HK&quot; ...
##  $ import : num  26.14 12.01 7.03 13.65 4.59 ...
##  $ export : num  22.99 12.2 11.84 7.74 5.38 ...</code></pre>
<ul>
<li>甚至也可以建立一個新的、空的<code>data.frame</code>。</li>
<li><code>df.test</code>就R的用法就是一個變數，並不是<code>df</code>和<code>test</code>各自是一個變數。</li>
</ul>
<div class="sourceCode" id="cb165"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb165-1" data-line-number="1">df.test &lt;-<span class="st"> </span><span class="kw">data.frame</span>()</a></code></pre></div>
</div>
</div>
<div id="observing-data.frame" class="section level2">
<h2><span class="header-section-number">1.10</span> Observing data.frame</h2>
<ul>
<li><code>View(df)</code> 用RStudio所提供的GUI直接觀看變數</li>
<li><code>head(df)</code> 取前面六筆資料（也就是六列的資料來概觀該資料）</li>
<li><code>class(df)</code></li>
<li><code>str(df)</code></li>
<li><code>summary(df)</code></li>
</ul>
<div class="sourceCode" id="cb166"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb166-1" data-line-number="1"><span class="co"># View(df)</span></a>
<a class="sourceLine" id="cb166-2" data-line-number="2"><span class="kw">head</span>(df)    <span class="co"># get first part of the data.frame</span></a></code></pre></div>
<pre><code>##   country import export
## 1      CN 26.142 22.987
## 2      US 12.008 12.204
## 3      JP  7.032 11.837
## 4      HK 13.646  7.739
## 5      KR  4.589  5.381
## 6      SG  5.768  4.610</code></pre>
<div class="sourceCode" id="cb168"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb168-1" data-line-number="1"><span class="kw">class</span>(df)</a></code></pre></div>
<pre><code>## [1] &quot;data.frame&quot;</code></pre>
<div class="sourceCode" id="cb170"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb170-1" data-line-number="1"><span class="kw">str</span>(df)</a></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    20 obs. of  3 variables:
##  $ country: chr  &quot;CN&quot; &quot;US&quot; &quot;JP&quot; &quot;HK&quot; ...
##  $ import : num  26.14 12.01 7.03 13.65 4.59 ...
##  $ export : num  22.99 12.2 11.84 7.74 5.38 ...</code></pre>
<div class="sourceCode" id="cb172"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb172-1" data-line-number="1"><span class="kw">summary</span>(df)</a></code></pre></div>
<pre><code>##    country              import           export      
##  Length:20          Min.   : 0.449   Min.   : 0.728  
##  Class :character   1st Qu.: 1.016   1st Qu.: 1.312  
##  Mode  :character   Median : 2.054   Median : 1.966  
##                     Mean   : 4.536   Mean   : 4.374  
##                     3rd Qu.: 4.884   3rd Qu.: 4.803  
##                     Max.   :26.142   Max.   :22.987</code></pre>
<div class="sourceCode" id="cb174"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb174-1" data-line-number="1"><span class="co"># look up help</span></a>
<a class="sourceLine" id="cb174-2" data-line-number="2"><span class="kw">help</span>(summary)</a>
<a class="sourceLine" id="cb174-3" data-line-number="3">?summary</a></code></pre></div>
<div id="data-dimension-inspecting" class="section level3">
<h3><span class="header-section-number">1.10.1</span> Data dimension inspecting</h3>
<div class="sourceCode" id="cb175"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb175-1" data-line-number="1"><span class="kw">dim</span>(df)</a></code></pre></div>
<pre><code>## [1] 20  3</code></pre>
<div class="sourceCode" id="cb177"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb177-1" data-line-number="1"><span class="kw">ncol</span>(df)</a></code></pre></div>
<pre><code>## [1] 3</code></pre>
<div class="sourceCode" id="cb179"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb179-1" data-line-number="1"><span class="kw">nrow</span>(df)</a></code></pre></div>
<pre><code>## [1] 20</code></pre>
<div class="sourceCode" id="cb181"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb181-1" data-line-number="1"><span class="kw">length</span>(df)</a></code></pre></div>
<pre><code>## [1] 3</code></pre>
</div>
</div>
<div id="getting-one-variable-from-a-data.frame" class="section level2">
<h2><span class="header-section-number">1.11</span> Getting one variable from a data.frame</h2>
<ul>
<li><code>names(df)</code> 列出變數名稱</li>
<li><code>df$發生.現.地點</code> 顯示該變數內容</li>
<li><code>df$發生時段</code> 顯示該變數內容</li>
<li><code>length(df$發生時段)</code> 顯示該變數的長度（相當於有幾個）</li>
</ul>
<div class="sourceCode" id="cb183"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb183-1" data-line-number="1"><span class="kw">names</span>(df)</a></code></pre></div>
<pre><code>## [1] &quot;country&quot; &quot;import&quot;  &quot;export&quot;</code></pre>
<div class="sourceCode" id="cb185"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb185-1" data-line-number="1"><span class="kw">head</span>(df<span class="op">$</span>發生.現.地點)</a></code></pre></div>
<pre><code>## NULL</code></pre>
<div class="sourceCode" id="cb187"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb187-1" data-line-number="1"><span class="kw">head</span>(df<span class="op">$</span>發生時段)</a></code></pre></div>
<pre><code>## NULL</code></pre>
<div class="sourceCode" id="cb189"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb189-1" data-line-number="1"><span class="kw">length</span>(df<span class="op">$</span>發生時段)</a></code></pre></div>
<pre><code>## [1] 0</code></pre>
<div class="sourceCode" id="cb191"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb191-1" data-line-number="1"><span class="kw">summary</span>(df)</a></code></pre></div>
<pre><code>##    country              import           export      
##  Length:20          Min.   : 0.449   Min.   : 0.728  
##  Class :character   1st Qu.: 1.016   1st Qu.: 1.312  
##  Mode  :character   Median : 2.054   Median : 1.966  
##                     Mean   : 4.536   Mean   : 4.374  
##                     3rd Qu.: 4.884   3rd Qu.: 4.803  
##                     Max.   :26.142   Max.   :22.987</code></pre>
</div>
<div id="mutate-透過運算產生新變數" class="section level2">
<h2><span class="header-section-number">1.12</span> mutate 透過運算產生新變數</h2>
<ul>
<li>這裡容易犯錯的是，要記得跟程式講說你要加總或四則運算的是哪個df的variable。</li>
<li>從下面的這個操作中，該data.frame會產生一個新的變數<code>sub</code>，這就相當於Excel中的某一行減去某一行，然後把資料放在新的一行。</li>
</ul>
<div class="sourceCode" id="cb193"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb193-1" data-line-number="1">df<span class="op">$</span>sub &lt;-<span class="st"> </span>df<span class="op">$</span>import <span class="op">-</span><span class="st"> </span>df<span class="op">$</span>export</a></code></pre></div>
</div>
<div id="filter-select-篩選資料選取變數" class="section level2">
<h2><span class="header-section-number">1.13</span> filter, select 篩選資料、選取變數</h2>
<ul>
<li><p>注意，要告訴程式<code>import</code>和<code>export</code>是哪個<code>data.frame</code>的。</p></li>
<li><p><code>df[,]</code>為存取<code>df</code>中某個區段的數值或某個數值的方法。因此<code>df[1, 1]</code>會取出第一行第一列，也就是第一筆資料的第一個vector。<code>df[2, 3]</code>則會取出第二筆資料的第三個variable。</p></li>
<li><p>下面的例子<code>nrow(df)</code>為1894，有1894筆資料，所以自然df<span class="math inline">\(import與df\)</span>export的長度都是1894。因此，比較這兩個變數的大小會得到一個長度為1894的boolean (logical) variable。因此把這個長度為1894、充滿TRUE和FALSE的logical vector丟進df的row之處，因為取自df，大小判斷式結果的長度自然和原本的df的列數相同。因此當這個TRUE/FALSE被丟在df的列之處，便會篩選出<code>import</code>大於<code>p.xport</code>的數值。</p></li>
<li><p>原本的df有五個variable，而上述的操作是篩選資料，所以被篩選的是列，因此行的數量、名稱都不會變。因此，我篩選完後，直接存取這個被篩選過的data.frame的country variable，自然是可以的。</p></li>
</ul>
<div class="sourceCode" id="cb194"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb194-1" data-line-number="1">df</a></code></pre></div>
<pre><code>##    country import export    sub
## 1       CN 26.142 22.987  3.155
## 2       US 12.008 12.204 -0.196
## 3       JP  7.032 11.837 -4.805
## 4       HK 13.646  7.739  5.907
## 5       KR  4.589  5.381 -0.792
## 6       SG  5.768  4.610  1.158
## 7       DE  2.131  2.866 -0.735
## 8       MY  2.802  2.784  0.018
## 9       VN  3.428  2.414  1.014
## 10      PH  3.019  2.092  0.927
## 11      TH  1.976  1.839  0.137
## 12      AU  1.118  1.788 -0.670
## 13      NL  1.624  1.665 -0.041
## 14      SA  0.449  1.409 -0.960
## 15      ID  0.983  1.391 -0.408
## 16      GB  1.302  1.075  0.227
## 17      IN  1.027  0.974  0.053
## 18      FR  0.553  0.899 -0.346
## 19      IT  0.670  0.800 -0.130
## 20      AE  0.455  0.728 -0.273</code></pre>
<div class="sourceCode" id="cb196"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb196-1" data-line-number="1"><span class="kw">names</span>(df)</a></code></pre></div>
<pre><code>## [1] &quot;country&quot; &quot;import&quot;  &quot;export&quot;  &quot;sub&quot;</code></pre>
<div class="sourceCode" id="cb198"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb198-1" data-line-number="1"><span class="kw">nrow</span>(df)</a></code></pre></div>
<pre><code>## [1] 20</code></pre>
<div class="sourceCode" id="cb200"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb200-1" data-line-number="1"><span class="co"># filter row data by column value</span></a>
<a class="sourceLine" id="cb200-2" data-line-number="2">df[df<span class="op">$</span>import <span class="op">&gt;</span><span class="st"> </span>df<span class="op">$</span>export,]</a></code></pre></div>
<pre><code>##    country import export   sub
## 1       CN 26.142 22.987 3.155
## 4       HK 13.646  7.739 5.907
## 6       SG  5.768  4.610 1.158
## 8       MY  2.802  2.784 0.018
## 9       VN  3.428  2.414 1.014
## 10      PH  3.019  2.092 0.927
## 11      TH  1.976  1.839 0.137
## 16      GB  1.302  1.075 0.227
## 17      IN  1.027  0.974 0.053</code></pre>
<div class="sourceCode" id="cb202"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb202-1" data-line-number="1">df[df<span class="op">$</span>import <span class="op">&gt;</span><span class="st"> </span>df<span class="op">$</span>export,]<span class="op">$</span>country</a></code></pre></div>
<pre><code>## [1] &quot;CN&quot; &quot;HK&quot; &quot;SG&quot; &quot;MY&quot; &quot;VN&quot; &quot;PH&quot; &quot;TH&quot; &quot;GB&quot; &quot;IN&quot;</code></pre>
<div class="sourceCode" id="cb204"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb204-1" data-line-number="1">df[df<span class="op">$</span>import <span class="op">&gt;</span><span class="st"> </span>df<span class="op">$</span>export,<span class="dv">1</span>]</a></code></pre></div>
<pre><code>## [1] &quot;CN&quot; &quot;HK&quot; &quot;SG&quot; &quot;MY&quot; &quot;VN&quot; &quot;PH&quot; &quot;TH&quot; &quot;GB&quot; &quot;IN&quot;</code></pre>
<div class="sourceCode" id="cb206"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb206-1" data-line-number="1"><span class="co"># 1 row == a data.frame with only one data entry</span></a>
<a class="sourceLine" id="cb206-2" data-line-number="2"><span class="kw">class</span>(df[df<span class="op">$</span>import <span class="op">&gt;</span><span class="st"> </span>df<span class="op">$</span>export,<span class="dv">1</span>])</a></code></pre></div>
<pre><code>## [1] &quot;character&quot;</code></pre>
<div class="sourceCode" id="cb208"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb208-1" data-line-number="1"><span class="kw">class</span>(df[,<span class="dv">1</span>]) <span class="co"># character vector</span></a></code></pre></div>
<pre><code>## [1] &quot;character&quot;</code></pre>
<div class="sourceCode" id="cb210"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb210-1" data-line-number="1"><span class="kw">class</span>(df[<span class="dv">1</span>,]) <span class="co"># data.frame</span></a></code></pre></div>
<pre><code>## [1] &quot;data.frame&quot;</code></pre>
<div class="sourceCode" id="cb212"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb212-1" data-line-number="1"><span class="kw">class</span>(<span class="kw">unlist</span>(df[<span class="dv">1</span>, <span class="dv">-1</span>])) <span class="co"># filter the 1st row and select all columns except 1</span></a></code></pre></div>
<pre><code>## [1] &quot;numeric&quot;</code></pre>
</div>
<div id="sorting-排序按照某個變數排序" class="section level2">
<h2><span class="header-section-number">1.14</span> sorting 排序：按照某個變數排序</h2>
<ul>
<li><code>df.sorted &lt;- df[order(df$import),]</code>會使得整個df照<code>import</code>的大小排序重新做排列。因為<code>order(df$import)</code>會把資料照指定順序排列後的位置傳回來，所以把他丟給<code>df</code>的列的位置，便會使得<code>df</code>的資料照指定的順序排列。
預設是由小到大，加上<code>decreasing = T</code>這個參數後變成由大而小。</li>
</ul>
<div class="sourceCode" id="cb214"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb214-1" data-line-number="1"><span class="co"># sort rows by df$import column</span></a>
<a class="sourceLine" id="cb214-2" data-line-number="2">df.sorted &lt;-<span class="st"> </span>df[<span class="kw">order</span>(df<span class="op">$</span>import),]</a>
<a class="sourceLine" id="cb214-3" data-line-number="3"><span class="co"># View(df.sorted)</span></a>
<a class="sourceLine" id="cb214-4" data-line-number="4"></a>
<a class="sourceLine" id="cb214-5" data-line-number="5"><span class="co"># sort rows in decreasing order</span></a>
<a class="sourceLine" id="cb214-6" data-line-number="6">df.sorted &lt;-<span class="st"> </span>df[<span class="kw">order</span>(df<span class="op">$</span>import, <span class="dt">decreasing =</span> T),]</a>
<a class="sourceLine" id="cb214-7" data-line-number="7"></a>
<a class="sourceLine" id="cb214-8" data-line-number="8"><span class="co"># add - to column in order() can sort in decreasing order</span></a>
<a class="sourceLine" id="cb214-9" data-line-number="9">df.sorted &lt;-<span class="st"> </span>df[<span class="kw">order</span>(<span class="op">-</span>df<span class="op">$</span>import),]</a>
<a class="sourceLine" id="cb214-10" data-line-number="10"></a>
<a class="sourceLine" id="cb214-11" data-line-number="11"><span class="kw">head</span>(df.sorted)</a></code></pre></div>
<pre><code>##   country import export    sub
## 1      CN 26.142 22.987  3.155
## 4      HK 13.646  7.739  5.907
## 2      US 12.008 12.204 -0.196
## 3      JP  7.032 11.837 -4.805
## 6      SG  5.768  4.610  1.158
## 5      KR  4.589  5.381 -0.792</code></pre>
</div>
<div id="plotting" class="section level2">
<h2><span class="header-section-number">1.15</span> Plotting</h2>
<ul>
<li><code>graphics::plot()</code>為會預載入R的繪圖套件，如果希望繪圖的同時加上回歸線和資料點標籤的話，必須要三行一起執行。</li>
</ul>
<div class="sourceCode" id="cb216"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb216-1" data-line-number="1"><span class="co"># plot(df) # raise error, 1st column is a character vector</span></a>
<a class="sourceLine" id="cb216-2" data-line-number="2"><span class="kw">plot</span>(df[, <span class="dv">2</span><span class="op">:</span><span class="dv">3</span>])</a></code></pre></div>
<p><img src="PDR_files/figure-html/unnamed-chunk-40-1.png" width="672" /></p>
<div class="sourceCode" id="cb217"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb217-1" data-line-number="1"><span class="kw">plot</span>(df[<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>, <span class="dv">2</span><span class="op">:</span><span class="dv">3</span>])</a>
<a class="sourceLine" id="cb217-2" data-line-number="2"><span class="kw">text</span>(import, export, <span class="dt">labels=</span>country, <span class="dt">cex=</span> <span class="fl">0.5</span>, <span class="dt">pos=</span><span class="dv">3</span>)</a>
<a class="sourceLine" id="cb217-3" data-line-number="3"><span class="kw">lines</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">25</span>, <span class="dv">1</span><span class="op">:</span><span class="dv">25</span>, <span class="dt">col=</span><span class="st">&#39;red&#39;</span>)</a></code></pre></div>
<p><img src="PDR_files/figure-html/unnamed-chunk-40-2.png" width="672" /></p>
<div class="sourceCode" id="cb218"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb218-1" data-line-number="1">?plot</a></code></pre></div>
</div>
<div id="more-using-dplyr" class="section level2">
<h2><span class="header-section-number">1.16</span> More: using dplyr</h2>
<div class="sourceCode" id="cb219"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb219-1" data-line-number="1"><span class="kw">library</span>(dplyr)</a></code></pre></div>
<pre><code>## Warning: package &#39;dplyr&#39; was built under R version 3.5.2</code></pre>
<pre><code>## 
## Attaching package: &#39;dplyr&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:stats&#39;:
## 
##     filter, lag</code></pre>
<pre><code>## The following objects are masked from &#39;package:base&#39;:
## 
##     intersect, setdiff, setequal, union</code></pre>
<div class="sourceCode" id="cb224"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb224-1" data-line-number="1">df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(country, import, export, <span class="dt">stringsAsFactors =</span> F)</a>
<a class="sourceLine" id="cb224-2" data-line-number="2">df &lt;-<span class="st"> </span><span class="kw">mutate</span>(df, <span class="dt">sub =</span> import <span class="op">-</span><span class="st"> </span>export)</a>
<a class="sourceLine" id="cb224-3" data-line-number="3"><span class="kw">filter</span>(df, import <span class="op">&gt;</span><span class="st"> </span>export)</a></code></pre></div>
<pre><code>##   country import export   sub
## 1      CN 26.142 22.987 3.155
## 2      HK 13.646  7.739 5.907
## 3      SG  5.768  4.610 1.158
## 4      MY  2.802  2.784 0.018
## 5      VN  3.428  2.414 1.014
## 6      PH  3.019  2.092 0.927
## 7      TH  1.976  1.839 0.137
## 8      GB  1.302  1.075 0.227
## 9      IN  1.027  0.974 0.053</code></pre>
<div class="sourceCode" id="cb226"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb226-1" data-line-number="1"><span class="kw">select</span>(df, <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">3</span>))</a></code></pre></div>
<pre><code>##    country export
## 1       CN 22.987
## 2       US 12.204
## 3       JP 11.837
## 4       HK  7.739
## 5       KR  5.381
## 6       SG  4.610
## 7       DE  2.866
## 8       MY  2.784
## 9       VN  2.414
## 10      PH  2.092
## 11      TH  1.839
## 12      AU  1.788
## 13      NL  1.665
## 14      SA  1.409
## 15      ID  1.391
## 16      GB  1.075
## 17      IN  0.974
## 18      FR  0.899
## 19      IT  0.800
## 20      AE  0.728</code></pre>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/01_basic//R01_0_preface.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["PDR.pdf", "PDR.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
